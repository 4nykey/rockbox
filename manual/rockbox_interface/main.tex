% $Id$ %
\chapter{\label{ref:rockbox_interface}The Rockbox interface}
\section{Your \dap}
\begin{center}
  \opt{player}{\includegraphics[height=11.8cm]{rockbox_interface/images/player-front.png}}
  \opt{recorder,recorderv2fm}{\includegraphics[height=11.8cm]{rockbox_interface/images/recorderv2fm-front.png}}
  \opt{ondio}{\includegraphics[height=11.8cm]{rockbox_interface/images/ondio-front.png}}
  \opt{h1xx}{\includegraphics[height=11.8cm]{rockbox_interface/images/h1xx-front.png}}
\end{center}

Throughout this manual, the buttons on the \dap\ are labelled according to the
picture above. To turn on and shutdown your \dap, the following keys are used:

\begin{table}
    \begin{btnmap}{}{}
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonOn}
      \opt{IPOD_4G_PAD}{\ButtonMenu\ or \ButtonSelect}
      \opt{ONDIO_PAD}{\ButtonOff}\opt{RECORDER_PAD,PLAYER_PAD}
        {Hold \ButtonOn\ for 2{}-3s}
      \opt{IAUDIO_X5_PAD}{\ButtonPower} 
      & Start Rockbox\\
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{Hold \ButtonOff}
      \opt{IPOD_4G_PAD}{Hold \ButtonPlay}
      \opt{ONDIO_PAD,recorderv2fm}{Hold \ButtonOff}
      \opt{recorder}{Double tap \ButtonOff\ when playback is stopped}
      \opt{PLAYER_PAD}{From the Main Menu, select \textbf{Shutdown}}
      \opt{IAUDIO_X5_PAD}{Hold \ButtonPower}
      & Shutdown Rockbox\\
    \end{btnmap}
\end{table}
\label{ref:Safeshutdown}On shutdown, Rockbox automatically saves its settings.

\opt{ondio,player,RECORDER_PAD}{
  In the unlikely event of a software failure, a hardware power off can be
  performed by holding down STOP until the Jukebox power light goes off. This
  works for all models of Jukebox.
}

\section{\label{ref:file_browser}File Browser}
\screenshot{rockbox_interface/images/ss-file-browser}{The file browser}{}
The file browser helps you navigate through the files on your \dap, entering
folders and executing the default action on each file. To help us differentiate
files, each file format is displayed with an icon. You can select which file
types are displayed (see page \pageref{ref:ShowFiles}).
\note{When Tag Cache is enabled you will access the Tag Cache browser instead
  of the File Browser. With Tag Cache you will be able accessing your music 
  using a database but won't be able doing any file manipulations.
  Read more about Tag Cache in Section \ref{ref:tagcache}.
}

\subsection{\label{ref:controls}Controls}
\begin{table}
    \begin{btnmap}{}{}
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,ONDIO_PAD,RECORDER_PAD,IAUDIO_X5_PAD}
        {\ButtonUp/\ButtonDown}
      \opt{PLAYER_PAD}{\ButtonLeft/\ButtonRight}
      \opt{IPOD_4G_PAD}{\ButtonScrollBack/\ButtonScrollFwd} 
         & Go to previous/next item in list. If you are on the first/last 
           entry, the cursor will wrap to the last/first entry.\\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,RECORDER_PAD}
        {\ButtonOn+\ButtonUp/\ButtonDown}
      \opt{PLAYER_PAD,IPOD_4G_PAD,IAUDIO_X5_PAD}{n/a}
      \opt{ONDIO_PAD}{n/a}
      & Move one page up/down on the list.\\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,RECORDER_PAD,IAUDIO_X5_PAD,ONDIO_PAD,IPOD_4G_PAD}{\ButtonLeft}
      \opt{PLAYER_PAD}{\ButtonStop} 
      & Go to the parent directory. \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD,IPOD_4G_PAD}
        {\ButtonRight/\ButtonSelect}
      \opt{PLAYER_PAD}{\ButtonPlay}
      \opt{ONDIO_PAD}{\ButtonRight}
      \opt{RECORDER_PAD}{\ButtonRight/\ButtonPlay}
      & Executes an action. Depending on the file type, that action may vary.
        (See page \pageref{ref:Filemenu}) \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,PLAYER_PAD,RECORDER_PAD}{\ButtonOn}
      \opt{IAUDIO_X5_PAD,IPOD_4G_PAD}{\ButtonPlay}
      \opt{ONDIO_PAD}{Short press on \ButtonMenu} 
      & If there is a MP3 playing, returns to the While Playing Screen (WPS)
        without stopping playback.  \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD,IPOD_4G_PAD}
        {Hold \ButtonSelect}
      \opt{RECORDER_PAD,PLAYER_PAD}{Hold \ButtonPlay/\ButtonOn+\ButtonPlay}
      \opt{ONDIO_PAD}{Hold \ButtonRight} 
      & Enter the File Menu\\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonMode}
      \opt{RECORDER_PAD}{\ButtonFOne}
      \opt{PLAYER_PAD,IPOD_4G_PAD,ONDIO_PAD}{\ButtonMenu}
      \opt{IAUDIO_X5_PAD}{Hold \ButtonPlay}
      & Enter the Main Menu \\
      %
      \opt{RECORDER_PAD}{
        \ButtonFTwo & Switches to the Browse/Play Quick Menu \\
        %
        \ButtonFThree & Switches to the Display Quick Menu \\ 
        %
      }
    \end{btnmap}
\end{table}

\opt{RECORDER_PAD}{
  The functions of the F keys are also summarised on the button bar at the
  bottom of the screen.
}

\subsection{\label{ref:Filemenu}\label{ref:PartIISectionFM}File Menu}
\screenshot{rockbox_interface/images/ss-file-menu}{The file menu}{}

This menu operates on the file that was selected in the browser. It offers the
following options:

\begin{description}
\item [Open with:] 
  Runs a viewer plugin on the file. Normally the filetype of a file is detected
  and the appropriate plugin is run automatically when you press play on it.
  Use this menu if for some reason you want to override the default action and
  select a viewer by hand.  See page \textmd{\pageref{ref:Viewersplugins}} for
  more details on viewers. For example, this would be used to view a text file
  with a non-standard extension, i.e. not ending with .txt.
\item [Playlist:]
  Change to the Playlist submenu (see below).
\item [Rename:]
  This function lets the user modify a file name.
\item [Cut:]
  Copies the name of the currently selected file or directory to the clipboard
  and marks it to be 'cut'.
\item [Copy:]
  Copies the name of the currently selected file or directory to the clipboard
  and marks it to be 'copied'.
\item [Paste:]
  Only visible if a file or directory name is on the clipboard. When selected
  it will move or copy the clipboard to the current directory.
\item [Delete:]
  Only files can be deleted, not folders. Rockbox will ask for confirmation
  before deleting a file. Press PLAY to confirm deletion or any other key to
  cancel.
\item [Delete Directory:]
  Deletes the folder pointed to by the cursor and all the files and folders
  contained in it.  Use with caution.
\item [Create Directory:]
  Makes a new folder in the current folder on the disk.
\end{description}

\subsection{\label{ref:Playlistsubmenu}Playlist Submenu}
\screenshot{rockbox_interface/images/ss-playlist-menu}{The playlist menu}{}
If the playlist submenu is invoked on a directory, it will act on all the files
within that directory.  If invoked on a playlist it will act on all the files
in that playlist. Otherwise it acts only on the current file.

This menu provides the following options:

\begin{description}
\item [Insert:]
  Add track(s) to playlist. If no other tracks have been inserted then the
  selected track will be added immediately after current playing track,
  otherwise they will be added to end of insertion list.
\item [Insert next:] 
  Add track(s) immediately after current playing track, no matter what else has
  been inserted.
\item [Insert last:]
  Add track(s) to end of playlist.
\item [Queue:]
  Queue is the same as Insert except queued tracks are deleted immediately from
  the playlist after they've been played. Also, queued tracks are not saved to
  the playlist file (see page \pageref{ref:playlistoptions}).
\item [Queue next:]
  Queue track(s) immediately after current playing track.
\item [Queue last:]
  Queue track(s) at end of playlist.
\end{description}

You can insert a track, directory or playlist even if nothing is currently
playing. In this case, a new playlist is created with only the selected tracks
and then play is started.\\
\note{The dynamic playlist is saved so resume will restore it exactly as before shutdown.}

\subsection{Virtual Keyboard}
\screenshot{rockbox_interface/images/ss-virtual-keyboard}{The virtual keyboard}{}
This is the virtual keyboard that is used when entering file names in Rockbox.

\opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD,RECORDER_PAD,IPOD_4G_PAD}{
    \begin{table}
    \begin{btnmap}{}{}
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD,RECORDER_PAD}
        {\ButtonUp/\ButtonDown/\ButtonLeft/\ButtonRight}
      \opt{IPOD_4G_PAD}{Please add correct keys}
      & Move about the virtual keyboard (moves the solid cursor) \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,RECORDER_PAD}
        {\ButtonOn+\ButtonLeft/\ButtonRight}
      \opt{IPOD_4G_PAD}{Please add correct keys}
      \opt{IAUDIO_X5_PAD}{Please add correct keys} 
      & Move about within the current file name (moves the line cursor) \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonSelect}
      \opt{RECORDER_PAD}{\ButtonPlay}
      \opt{IPOD_4G_PAD}{Please add correct keys}
      \opt{IAUDIO_X5_PAD}{Please add correct keys} 
      & Inserts the currently selected keyboard letter at the current
        filename cursor position \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,RECORDER_PAD}{\ButtonOff}
      \opt{IPOD_4G_PAD}{Please add correct keys}
      \opt{IAUDIO_X5_PAD}{Please add correct keys} 
      & Exits the virtual keyboard without saving any changes \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IPOD_4G_PAD,IAUDIO_X5_PAD}{n/a}
      \opt{RECORDER_PAD}{\ButtonFOne}
      & SHIFT: Shifts between the upper case, lower case and accented keyboards \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonOn}
      \opt{RECORDER_PAD}{\ButtonFTwo}
      \opt{IPOD_4G_PAD}{Please add correct keys}
      \opt{IAUDIO_X5_PAD}{Please add correct keys} 
      & OK: Exits the virtual keyboard and saves any changer \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonRec}
      \opt{RECORDER_PAD}{\ButtonFThree}
      \opt{IPOD_4G_PAD}{Please add correct keys}
      \opt{IAUDIO_X5_PAD}{Please add correct keys} 
      & DEL: Deletes the character before the current filename cursor \\
      %
      \opt{SWCODEC}{
        \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonMode}
        \opt{IPOD_4G_PAD}{Please add correct keys}
        \opt{IAUDIO_X5_PAD}{Please add correct keys} 
        & Enters Morse input mode\\
      }
    \end{btnmap}
  \end{table}
}

\opt{ondio}{
  \textbf{Picker area}
  \begin{table}
    \begin{btnmap}{}{}
      \ButtonUp/\ButtonDown/\ButtonLeft/\ButtonRight
        & Move about the virtual keyboard (moves the solid cursor).
          If you move out of the picker area with \ButtonUp/\ButtonDown,
          you get to the line edit mode. \\
      \ButtonMenu 
        & Selects the letter underneath the cursor. \\
      Long press on \ButtonMenu 
       & Accepts the currently selected letter\\
      \ButtonOff 
       & Aborts the currently selected letter\\
    \end{btnmap}
  \end{table}
  \textbf{Line edit mode}
  \begin{table}
    \begin{btnmap}{}{}
      \ButtonLeft/\ButtonRight & Move left and right\\
      \ButtonMenu & Deletes the letter to the left of the cursor\\
      Long press on \ButtonMenu & Accepts the deletion\\
      \ButtonUp/\ButtonDown & Returns to the picker area\\
    \end{btnmap}
  \end{table}
}
\opt{player}{
  The current filename is always listed on the first line of the display. The
  second line of the display can contain the character selection bar, as in the
  screenshot above, or  one of a number of other options.
  \begin{table}
    \begin{btnmap}{}{}
      \ButtonLeft/\ButtonRight & Moves the arrow to/from the filename \\
                               & and changes between the character bar \\
                               & and BACKSPACE, DELETE, ACCEPT and ABORT. \\
      \ButtonPlay/\ButtonStop & Varies (see below) \\
      \ButtonMenu & Shift.  When the character selection bar is selected\\
                  & this changes between upper case, lower case, \\
                  & and accented letters. \\
    \end{btnmap}
  \end{table}

  The function of the \ButtonPlay\ and \ButtonStop\ buttons depends on what the
  arrow is pointing to, as follows.
  
  \begin{table}
      \begin{center}
      \begin{tabularx}{.75\textwidth}{lX}
        \textbf{Selected option} & \textbf{Play/Stop function} \\\midrule
        filename & Moves the cursor left (\ButtonStop) \\
                 & or right (\ButtonPlay) within the filename \\
        character bar & Moves the character bar to the next (\ButtonPlay)\\
                      & or previous (\ButtonStop) character. \\
        BACKSPACE & \ButtonPlay deletes the character before \\
                  & the current cursor position \\
        DELETE & \ButtonPlay deletes the character at the \\
               & current cursor position\\
        ACCEPT & \ButtonPlay exits the virtual keyboard and \\
               & saves any changes \\
        ABORT & \ButtonPlay exits the virtual keyboard and \\
              & discards any changes \\\bottomrule
      \end{tabularx}
    \end{center}
  \end{table}
}

\input{rockbox_interface/tagcache.tex}
\input{rockbox_interface/wps.tex}

