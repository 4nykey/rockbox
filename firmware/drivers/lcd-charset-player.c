/***************************************************************************
 *             __________               __   ___.
 *   Open      \______   \ ____   ____ |  | _\_ |__   _______  ___
 *   Source     |       _//  _ \_/ ___\|  |/ /| __ \ /  _ \  \/  /
 *   Jukebox    |    |   (  <_> )  \___|    < | \_\ (  <_> > <  <
 *   Firmware   |____|_  /\____/ \___  >__|_ \|___  /\____/__/\_ \
 *                     \/            \/     \/    \/            \/
 * $Id$
 *
 * Copyright (C) 2007 by Jens Arnold
 *
 * All files in this archive are subject to the GNU General Public License.
 * See the file COPYING in the source tree root for full license agreement.
 *
 * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
 * KIND, either express or implied.
 *
 ****************************************************************************/

#include "config.h"
#include "hwcompat.h"

#include "lcd-charcell.h"

int hw_pattern_count;  /* actual number of user-definable hw patterns */

const struct xchar_info *xchar_info;
int xchar_info_size;  /* number of entries */

static const struct xchar_info xchar_info_newlcd[] = {
    /* Standard ascii */
    {   0x20,      0,  0, 0x20 }, /*   */
    {   0x21,      0,  0, 0x21 }, /* ! */
    {   0x22,      0,  0, 0x22 }, /* " */
    {   0x23,      0,  0, 0x23 }, /* # */
    {   0x24,      0,  0, 0x24 }, /* $ */
    {   0x25,      0,  0, 0x25 }, /* % */
    {   0x26,      0,  0, 0x26 }, /* & */
    {   0x27,      0,  0, 0x27 }, /* ' */
    {   0x28,      0,  0, 0x28 }, /* ( */
    {   0x29,      0,  0, 0x29 }, /* ) */
    {   0x2a,      0,  0, 0x2a }, /* * */
    {   0x2b,      0,  0, 0x2b }, /* + */
    {   0x2c,      0,  0, 0x2c }, /* , */
    {   0x2d,      0,  0, 0x2d }, /* - */
    {   0x2e,      0,  0, 0x2e }, /* . */
    {   0x2f,      0,  0, 0x2f }, /* / */
    {   0x30,      0,  0, 0x30 }, /* 0 */
    {   0x31,      0,  0, 0x31 }, /* 1 */
    {   0x32,      0,  0, 0x32 }, /* 2 */
    {   0x33,      0,  0, 0x33 }, /* 3 */
    {   0x34,      0,  0, 0x34 }, /* 4 */
    {   0x35,      0,  0, 0x35 }, /* 5 */
    {   0x36,      0,  0, 0x36 }, /* 6 */
    {   0x37,      0,  0, 0x37 }, /* 7 */
    {   0x38,      0,  0, 0x38 }, /* 8 */
    {   0x39,      0,  0, 0x39 }, /* 9 */
    {   0x3a,      0,  0, 0x3a }, /* : */
    {   0x3b,      0,  0, 0x3b }, /* ; */
    {   0x3c,      0,  0, 0x3c }, /* < */
    {   0x3d,      0,  0, 0x3d }, /* = */
    {   0x3e,      0,  0, 0x3e }, /* > */
    {   0x3f,      0,  0, 0x3f }, /* ? */
    {   0x40,      0,  0, 0x40 }, /* @ */
    {   0x41,      0,  0, 0x41 }, /* A */
    {   0x42,      0,  0, 0x42 }, /* B */
    {   0x43,      0,  0, 0x43 }, /* C */
    {   0x44,      0,  0, 0x44 }, /* D */
    {   0x45,      0,  0, 0x45 }, /* E */
    {   0x46,      0,  0, 0x46 }, /* F */
    {   0x47,      0,  0, 0x47 }, /* G */
    {   0x48,      0,  0, 0x48 }, /* H */
    {   0x49,      0,  0, 0x49 }, /* I */
    {   0x4a,      0,  0, 0x4a }, /* J */
    {   0x4b,      0,  0, 0x4b }, /* K */
    {   0x4c,      0,  0, 0x4c }, /* L */
    {   0x4d,      0,  0, 0x4d }, /* M */
    {   0x4e,      0,  0, 0x4e }, /* N */
    {   0x4f,      0,  0, 0x4f }, /* O */
    {   0x50,      0,  0, 0x50 }, /* P */
    {   0x51,      0,  0, 0x51 }, /* Q */
    {   0x52,      0,  0, 0x52 }, /* R */
    {   0x53,      0,  0, 0x53 }, /* S */
    {   0x54,      0,  0, 0x54 }, /* T */
    {   0x55,      0,  0, 0x55 }, /* U */
    {   0x56,      0,  0, 0x56 }, /* V */
    {   0x57,      0,  0, 0x57 }, /* W */
    {   0x58,      0,  0, 0x58 }, /* X */
    {   0x59,      0,  0, 0x59 }, /* Y */
    {   0x5a,      0,  0, 0x5a }, /* Z */
    {   0x5b,      0,  0, 0x5b }, /* [ */
    {   0x5c,      0,  0, 0x12 }, /* \ */
    {   0x5d,      0,  0, 0x5d }, /* ] */
    {   0x5e,      0,  0, 0x5e }, /* ^ */
    {   0x5f,      0,  0, 0x5f }, /* _ */
    {   0x60,      0,  0, 0x60 }, /* ` */
    {   0x61,      0,  0, 0x61 }, /* a */
    {   0x62,      0,  0, 0x62 }, /* b */
    {   0x63,      0,  0, 0x63 }, /* c */
    {   0x64,      0,  0, 0x64 }, /* d */
    {   0x65,      0,  0, 0x65 }, /* e */
    {   0x66,      0,  0, 0x66 }, /* f */
    {   0x67,      0,  0, 0x67 }, /* g */
    {   0x68,      0,  0, 0x68 }, /* h */
    {   0x69,      0,  0, 0x69 }, /* i */
    {   0x6a,      0,  0, 0x6a }, /* j */
    {   0x6b,      0,  0, 0x6b }, /* k */
    {   0x6c,      0,  0, 0x6c }, /* l */
    {   0x6d,      0,  0, 0x6d }, /* m */
    {   0x6e,      0,  0, 0x6e }, /* n */
    {   0x6f,      0,  0, 0x6f }, /* o */
    {   0x70,      0,  0, 0x70 }, /* p */
    {   0x71,      0,  0, 0x71 }, /* q */
    {   0x72,      0,  0, 0x72 }, /* r */
    {   0x73,      0,  0, 0x73 }, /* s */
    {   0x74,      0,  0, 0x74 }, /* t */
    {   0x75,      0,  0, 0x75 }, /* u */
    {   0x76,      0,  0, 0x76 }, /* v */
    {   0x77,      0,  0, 0x77 }, /* w */
    {   0x78,      0,  0, 0x78 }, /* x */
    {   0x79,      0,  0, 0x79 }, /* y */
    {   0x7a,      0,  0, 0x7a }, /* z */
    {   0x7b,      0,  0, 0x7b }, /* { */
    {   0x7c,      0,  0, 0x7c }, /* | */
    {   0x7d,      0,  0, 0x7d }, /* } */
    {   0x7e,      0,  0, 0xf0 }, /* ~ */
    {   0x7f,      0,  0, 0xfe }, /* (full grid) */

#ifndef BOOTLOADER /* bootloader only supports pure ASCII */
    /* Latin 1 */
    {   0xa0,      0,  0, 0x20 }, /*   (non-breaking space) */
    {   0xa1, 0x0010,  1, 0x21 }, /* ¡ (inverted !) */
    {   0xa2, 0x0011,  1, 0x63 }, /* ¢ (cent sign) */
    {   0xa3, 0x0012,  1, 0x4c }, /* £ (pound sign) */
    {   0xa4, 0x0013,  1, 0x6f }, /* ¤ (currency sign) */
    {   0xa5,      0,  0, 0x5c }, /* ¥ (yen sign) */

    {   0xa7,      0,  0, 0x15 }, /* § (paragraph sign) */

    {   0xab,      0,  0, 0x9e }, /* « (left double-angle quotation mark) */

    {   0xad,      0,  0, 0x2d }, /* ­ (soft hyphen) */

    {   0xaf, 0x0015,  1, 0x2d }, /* ¯ (macron) */

    {   0xb1,      0,  0, 0x95 }, /* ± (plus-minus sign) */
    {   0xb2,      0,  0, 0x99 }, /* ³ (superscript 2) */
    {   0xb3,      0,  0, 0x9a }, /* ³ (superscript 3) */

    {   0xb5,      0,  0, 0xe6 }, /* µ (micro sign) */
    {   0xb6,      0,  0, 0x14 }, /* ¶ (pilcrow sign) */
    {   0xb7,      0,  0, 0xa5 }, /* · (middle dot) */

    {   0xbb,      0,  0, 0x9f }, /* » (right double-angle quotation mark) */
    {   0xbc,      0,  0, 0x9c }, /* ¼ (one quarter) */
    {   0xbd,      0,  0, 0x9b }, /* ½ (one half) */
    {   0xbe,      0,  0, 0x9d }, /* ¾ (three quarters) */
    {   0xbf, 0x001f,  1, 0x3f }, /* ¿ (inverted ?) */
    {   0xc0, 0x0020,  1, 0x41 }, /* À (A grave) */
    {   0xc1, 0x0021,  1, 0x41 }, /* Á (A acute) */
    {   0xc2, 0x0022,  1, 0x41 }, /* Â (A circumflex) */
    {   0xc3, 0x0023,  1, 0x41 }, /* Ã (A tilde) */
    {   0xc4, 0x0024,  1, 0x41 }, /* Ä (A dieresis) */
    {   0xc5, 0x0025,  1, 0x41 }, /* Å (A with ring above) */
    {   0xc6, 0x0026,  1, 0x41 }, /* Æ (AE ligature) */
    {   0xc7, 0x0027,  1, 0x43 }, /* Ç (C cedilla) */
    {   0xc8, 0x0028,  1, 0x45 }, /* È (E grave) */
    {   0xc9, 0x0029,  1, 0x45 }, /* É (E acute) */
    {   0xca, 0x002a,  1, 0x45 }, /* Ê (E circumflex) */
    {   0xcb, 0x002b,  1, 0x45 }, /* Ë (E dieresis) */
    {   0xcc, 0x002c,  1, 0x49 }, /* Ì (I grave) */
    {   0xcd, 0x002d,  1, 0x49 }, /* Í (I acute) */
    {   0xce, 0x002e,  1, 0x49 }, /* Î (I circumflex) */
    {   0xcf, 0x002f,  1, 0x49 }, /* Ï (I dieresis) */
    {   0xd0, 0x0030,  1, 0x44 }, /* Ð (ETH) */
    {   0xd1, 0x0031,  1, 0x4e }, /* Ñ (N tilde) */
    {   0xd2, 0x0032,  1, 0x4f }, /* Ò (O grave) */
    {   0xd3, 0x0033,  1, 0x4f }, /* Ó (O acute) */
    {   0xd4, 0x0034,  1, 0x4f }, /* Ô (O circumflex) */
    {   0xd5, 0x0035,  1, 0x4f }, /* Õ (O tilde) */
    {   0xd6, 0x0036,  1, 0x4f }, /* Ö (O dieresis) */
    {   0xd7,      0,  0, 0x96 }, /* × (multiplication sign) */
    {   0xd8, 0x0037,  1, 0x4f }, /* Ø (O stroke) */
    {   0xd9, 0x0038,  1, 0x55 }, /* Ù (U grave) */
    {   0xda, 0x0039,  1, 0x55 }, /* Ú (U acute) */
    {   0xdb, 0x003a,  1, 0x55 }, /* Û (U circumflex) */
    {   0xdc, 0x003b,  1, 0x55 }, /* Ü (U dieresis) */
    {   0xdd, 0x003c,  1, 0x59 }, /* Ý (Y acute) */

    {   0xdf,      0,  0, 0xe1 }, /* ß (sharp s) */
    {   0xe0, 0x003d,  1, 0x61 }, /* à (a grave) */
    {   0xe1, 0x003e,  1, 0x61 }, /* á (a acute) */
    {   0xe2, 0x003f,  1, 0x61 }, /* â (a circumflex) */
    {   0xe3, 0x0040,  1, 0x61 }, /* ã (a tilde) */
    {   0xe4, 0x0041,  1, 0x61 }, /* ä (a dieresis) */
    {   0xe5, 0x0042,  1, 0x61 }, /* å (a with ring above) */

    {   0xe7, 0x0043,  1, 0x63 }, /* ç (c cedilla) */
    {   0xe8, 0x0044,  1, 0x65 }, /* è (e grave) */
    {   0xe9, 0x0045,  1, 0x65 }, /* é (e acute) */
    {   0xea, 0x0046,  1, 0x65 }, /* ê (e circumflex) */
    {   0xeb, 0x0047,  1, 0x65 }, /* ë (e dieresis) */
    {   0xec, 0x0048,  1, 0x69 }, /* ì (i grave) */
    {   0xed, 0x0049,  1, 0x69 }, /* í (i acute) */
    {   0xee, 0x004a,  1, 0x69 }, /* î (i circumflex) */
    {   0xef, 0x004b,  1, 0x69 }, /* ï (i dieresis) */

    {   0xf1, 0x004c,  1, 0x6e }, /* ñ (n tilde) */
    {   0xf2, 0x004d,  1, 0x6f }, /* ò (o grave) */
    {   0xf3, 0x004e,  1, 0x6f }, /* ó (o acute) */
    {   0xf4, 0x004f,  1, 0x6f }, /* ô (o circumflex) */
    {   0xf5, 0x0050,  1, 0x6f }, /* õ (o tilde) */
    {   0xf6, 0x0051,  1, 0x6f }, /* ö (o dieresis) */
    {   0xf7,      0,  0, 0x97 }, /* ÷ (division sign) */
    {   0xf8, 0x0053,  1, 0x6f }, /* ø (o slash) */
    {   0xf9, 0x0054,  1, 0x75 }, /* ù (u grave) */
    {   0xfa, 0x0055,  1, 0x75 }, /* ú (u acute) */
    {   0xfb, 0x0056,  1, 0x75 }, /* û (u circumflex) */
    {   0xfc, 0x0057,  1, 0x75 }, /* ü (u dieresis) */
    {   0xfd, 0x0058,  1, 0x79 }, /* ý (y acute) */

    {   0xff, 0x0059,  1, 0x79 }, /* ÿ (y dieresis) */

    /* Runtime-definable characters */
    { 0xe000, 0x8000, 15, 0x20 }, /* variable character 0 */
    { 0xe001, 0x8001, 15, 0x20 }, /* variable character 1 */
    { 0xe002, 0x8002, 15, 0x20 }, /* variable character 2 */
    { 0xe003, 0x8003, 15, 0x20 }, /* variable character 3 */
    { 0xe004, 0x8004, 15, 0x20 }, /* variable character 4 */
    { 0xe005, 0x8005, 15, 0x20 }, /* variable character 5 */
    { 0xe006, 0x8006, 15, 0x20 }, /* variable character 6 */
    { 0xe007, 0x8007, 15, 0x20 }, /* variable character 7 */
    { 0xe008, 0x8008, 15, 0x20 }, /* variable character 8 */
    { 0xe009, 0x8009, 15, 0x20 }, /* variable character 9 */
    { 0xe00a, 0x800a, 15, 0x20 }, /* variable character 10 */
    { 0xe00b, 0x800b, 15, 0x20 }, /* variable character 11 */
    { 0xe00c, 0x800c, 15, 0x20 }, /* variable character 12 */
    { 0xe00d, 0x800d, 15, 0x20 }, /* variable character 13 */
    { 0xe00e, 0x800e, 15, 0x20 }, /* variable character 14 */
    { 0xe00f, 0x800f, 15, 0x20 }, /* variable character 15 */

    /* Icons and special symbols */
    { 0xe100, 0x0005, 14, 0x3f }, /* unknown icon (mirrored ?) */
    { 0xe101, 0x0006, 14, 0x94 }, /* bookmark icon */
    { 0xe102, 0x0007, 14, 0x29 }, /* plugin icon */
    { 0xe103, 0x0008, 14, 0x91 }, /* folder icon */
    { 0xe104, 0x0009, 14, 0x78 }, /* firmware icon */
    { 0xe105, 0x000a, 14, 0x2b }, /* language icon */
    { 0xe106, 0x000b, 14, 0x13 }, /* audio icon (note) */
    { 0xe107, 0x000c, 14, 0x94 }, /* wps icon */
    { 0xe108, 0x000d, 14, 0xd0 }, /* playlist icon */
    { 0xe109, 0x000e, 14, 0xd0 }, /* text file icon */
    { 0xe10a, 0x000f, 14, 0xd0 }, /* config icon */
    { 0xe10b,      0,  0, 0x7f }, /* left arrow */
    { 0xe10c,      0,  0, 0x7e }, /* right arrow */
    { 0xe10d,      0,  0, 0x18 }, /* up arrow */
    { 0xe10e,      0,  0, 0x19 }, /* down arrow */
    { 0xe10f,      0,  0, 0x11 }, /* filled left arrow */
    { 0xe110,      0,  0, 0x10 }, /* filled right arrow */
    { 0xe111,      0,  0, 0x1f }, /* filled up arrow */
    { 0xe112,      0,  0, 0x1e }, /* filled down arrow */
    { 0xe113,      0,  0, 0x20 }, /* level 0/7 */
    { 0xe114,      0,  0, 0x80 }, /* level 1/7 */
    { 0xe115,      0,  0, 0x81 }, /* level 2/7 */
    { 0xe116,      0,  0, 0x82 }, /* level 3/7 */
    { 0xe117,      0,  0, 0x83 }, /* level 4/7 */
    { 0xe118,      0,  0, 0x84 }, /* level 5/7 */
    { 0xe119,      0,  0, 0x85 }, /* level 6/7 */
    { 0xe11a,      0,  0, 0x86 }, /* level 7/7 */
#endif /* !BOOTLOADER */

    /* no-char symbol */
    { 0xfffd,      0,  0, 0x91 },
};

static const struct xchar_info xchar_info_oldlcd[] = {
    /* Standard ascii */
    {   0x20,      0,  0, 0x24 }, /*   */
    {   0x21,      0,  0, 0x25 }, /* ! */
    {   0x22,      0,  0, 0x26 }, /* " */
    {   0x23,      0,  0, 0x27 }, /* # */
    {   0x24,      0,  0, 0x28 }, /* $ */
    {   0x25,      0,  0, 0x29 }, /* % */
    {   0x26,      0,  0, 0x2a }, /* & */
    {   0x27,      0,  0, 0x2b }, /* ' */
    {   0x28,      0,  0, 0x2c }, /* ( */
    {   0x29,      0,  0, 0x2d }, /* ) */
    {   0x2a,      0,  0, 0x2e }, /* * */
    {   0x2b,      0,  0, 0x2f }, /* + */
    {   0x2c,      0,  0, 0x30 }, /* , */
    {   0x2d,      0,  0, 0x31 }, /* - */
    {   0x2e,      0,  0, 0x32 }, /* . */
    {   0x2f,      0,  0, 0x33 }, /* / */
    {   0x30,      0,  0, 0x34 }, /* 0 */
    {   0x31,      0,  0, 0x35 }, /* 1 */
    {   0x32,      0,  0, 0x36 }, /* 2 */
    {   0x33,      0,  0, 0x37 }, /* 3 */
    {   0x34,      0,  0, 0x38 }, /* 4 */
    {   0x35,      0,  0, 0x39 }, /* 5 */
    {   0x36,      0,  0, 0x3a }, /* 6 */
    {   0x37,      0,  0, 0x3b }, /* 7 */
    {   0x38,      0,  0, 0x3c }, /* 8 */
    {   0x39,      0,  0, 0x3d }, /* 9 */
    {   0x3a,      0,  0, 0x3e }, /* : */
    {   0x3b,      0,  0, 0x3f }, /* ; */
    {   0x3c,      0,  0, 0x40 }, /* < */
    {   0x3d,      0,  0, 0x41 }, /* = */
    {   0x3e,      0,  0, 0x42 }, /* > */
    {   0x3f,      0,  0, 0x43 }, /* ? */
    {   0x40,      0,  0, 0x04 }, /* @ */
    {   0x41,      0,  0, 0x45 }, /* A */
    {   0x42,      0,  0, 0x46 }, /* B */
    {   0x43,      0,  0, 0x47 }, /* C */
    {   0x44,      0,  0, 0x48 }, /* D */
    {   0x45,      0,  0, 0x49 }, /* E */
    {   0x46,      0,  0, 0x4a }, /* F */
    {   0x47,      0,  0, 0x4b }, /* G */
    {   0x48,      0,  0, 0x4c }, /* H */
    {   0x49,      0,  0, 0x4d }, /* I */
    {   0x4a,      0,  0, 0x4e }, /* J */
    {   0x4b,      0,  0, 0x4f }, /* K */
    {   0x4c,      0,  0, 0x50 }, /* L */
    {   0x4d,      0,  0, 0x51 }, /* M */
    {   0x4e,      0,  0, 0x52 }, /* N */
    {   0x4f,      0,  0, 0x53 }, /* O */
    {   0x50,      0,  0, 0x54 }, /* P */
    {   0x51,      0,  0, 0x55 }, /* Q */
    {   0x52,      0,  0, 0x56 }, /* R */
    {   0x53,      0,  0, 0x57 }, /* S */
    {   0x54,      0,  0, 0x58 }, /* T */
    {   0x55,      0,  0, 0x59 }, /* U */
    {   0x56,      0,  0, 0x5a }, /* V */
    {   0x57,      0,  0, 0x5b }, /* W */
    {   0x58,      0,  0, 0x5c }, /* X */
    {   0x59,      0,  0, 0x5d }, /* Y */
    {   0x5a,      0,  0, 0x5e }, /* Z */
    {   0x5b,      0,  0, 0xa9 }, /* [ */
    {   0x5c, 0x0000,  2, 0x33 }, /* \ */
    {   0x5d,      0,  0, 0xce }, /* ] */
    {   0x5e, 0x0001,  2, 0xee }, /* ^ */
    {   0x5f,      0,  0, 0x15 }, /* _ */
    {   0x60, 0x0002,  2, 0x2b }, /* ` */
    {   0x61,      0,  0, 0x65 }, /* a */
    {   0x62,      0,  0, 0x66 }, /* b */
    {   0x63,      0,  0, 0x67 }, /* c */
    {   0x64,      0,  0, 0x68 }, /* d */
    {   0x65,      0,  0, 0x69 }, /* e */
    {   0x66,      0,  0, 0x6a }, /* f */
    {   0x67,      0,  0, 0x6b }, /* g */
    {   0x68,      0,  0, 0x6c }, /* h */
    {   0x69,      0,  0, 0x6d }, /* i */
    {   0x6a,      0,  0, 0x6e }, /* j */
    {   0x6b,      0,  0, 0x6f }, /* k */
    {   0x6c,      0,  0, 0x70 }, /* l */
    {   0x6d,      0,  0, 0x71 }, /* m */
    {   0x6e,      0,  0, 0x72 }, /* n */
    {   0x6f,      0,  0, 0x73 }, /* o */
    {   0x70,      0,  0, 0x74 }, /* p */
    {   0x71,      0,  0, 0x75 }, /* q */
    {   0x72,      0,  0, 0x76 }, /* r */
    {   0x73,      0,  0, 0x77 }, /* s */
    {   0x74,      0,  0, 0x78 }, /* t */
    {   0x75,      0,  0, 0x79 }, /* u */
    {   0x76,      0,  0, 0x7a }, /* v */
    {   0x77,      0,  0, 0x7b }, /* w */
    {   0x78,      0,  0, 0x7c }, /* x */
    {   0x79,      0,  0, 0x7d }, /* y */
    {   0x7a,      0,  0, 0x7e }, /* z */
    {   0x7b,      0,  0, 0x2c }, /* { (hard-coded ( ) */
    {   0x7c, 0x0003,  2, 0x25 }, /* | */
    {   0x7d,      0,  0, 0x2d }, /* } (hard-coded ) ) */
    {   0x7e, 0x0004,  2, 0x31 }, /* ~ */
    {   0x7f,      0,  0, 0x8b }, /* (full grid) */

#ifndef BOOTLOADER /* bootloader only supports pure ASCII */
    /* Latin 1 */
    {   0xa0,      0,  0, 0x24 }, /*   (non-breaking space) */
    {   0xa1,      0,  0, 0x44 }, /* ¡ (inverted !) */
    {   0xa2,      0,  0, 0xa8 }, /* ¢ (cent sign) */
    {   0xa3,      0,  0, 0x05 }, /* £ (pound sign) */
    {   0xa4,      0,  0, 0x28 }, /* ¤ (currency sign) */
    {   0xa5,      0,  0, 0x07 }, /* ¥ (yen sign) */

    {   0xa7,      0,  0, 0x63 }, /* § (paragraph sign) */
	
	{   0xab, 0x0014,  1, 0x40 }, /* « (left double-angle quotation mark) */

    {   0xad,      0,  0, 0x31 }, /* ­ (soft hyphen) */

    {   0xaf,      0,  0, 0xee }, /* ¯ (macron) */

    {   0xb1, 0x0016,  1, 0x2f }, /* ± (plus-minus sign) */
    {   0xb2, 0x0017,  1, 0x36 }, /* ³ (superscript 2) */
    {   0xb3, 0x0018,  1, 0x37 }, /* ³ (superscript 3) */

    {   0xb5, 0x0019,  1, 0x79 }, /* µ (micro sign) */
    {   0xb6,      0,  0, 0x1a }, /* ¶ (pilcrow sign) */
    {   0xb7, 0x001a,  1, 0x32 }, /* · (middle dot) */

    {   0xbb, 0x001b,  1, 0x42 }, /* » (right double-angle quotation mark) */
    {   0xbc, 0x001c,  1, 0x29 }, /* ¼ (one quarter) */
    {   0xbd, 0x001d,  1, 0x29 }, /* ½ (one half) */
    {   0xbe, 0x001e,  1, 0x29 }, /* ¾ (three quarters) */
    {   0xbf,      0,  0, 0x64 }, /* ¿ (inverted ?) */
    {   0xc0,      0,  0, 0x8c }, /* À (A grave) */
    {   0xc1,      0,  0, 0x8d }, /* Á (A acute) */
    {   0xc2,      0,  0, 0x8e }, /* Â (A circumflex) */
    {   0xc3,      0,  0, 0x8f }, /* Ã (A tilde) */
    {   0xc4,      0,  0, 0x5f }, /* Ä (A dieresis) */
    {   0xc5,      0,  0, 0x12 }, /* Å (A with ring above) */
    {   0xc6,      0,  0, 0x20 }, /* Æ (AE ligature) */
    {   0xc7,      0,  0, 0x0d }, /* Ç (C cedilla) */
    {   0xc8,      0,  0, 0x90 }, /* È (E grave) */
    {   0xc9,      0,  0, 0x23 }, /* É (E acute) */
    {   0xca,      0,  0, 0x91 }, /* Ê (E circumflex) */
    {   0xcb,      0,  0, 0x92 }, /* Ë (E dieresis) */
    {   0xcc,      0,  0, 0x93 }, /* Ì (I grave) */
    {   0xcd,      0,  0, 0x94 }, /* Í (I acute) */
    {   0xce, 0x002e,  1, 0x4d }, /* Î (I circumflex) */
    {   0xcf, 0x002f,  1, 0x4d }, /* Ï (I dieresis) */
    {   0xd0,      0,  0, 0x95 }, /* Ð (ETH) */
    {   0xd1,      0,  0, 0x61 }, /* Ñ (N tilde) */
    {   0xd2,      0,  0, 0x96 }, /* Ò (O grave) */
    {   0xd3,      0,  0, 0x97 }, /* Ó (O acute) */
    {   0xd4,      0,  0, 0x98 }, /* Ô (O circumflex) */
    {   0xd5,      0,  0, 0x99 }, /* Õ (O tilde) */
    {   0xd6,      0,  0, 0x60 }, /* Ö (O dieresis) */
    {   0xd7,      0,  0, 0xde }, /* × (multiplication sign) */
    {   0xd8,      0,  0, 0x0f }, /* Ø (O stroke) */
    {   0xd9,      0,  0, 0x9a }, /* Ù (U grave) */
    {   0xda,      0,  0, 0x9b }, /* Ú (U acute) */
    {   0xdb, 0x003a,  1, 0x59 }, /* Û (U circumflex) */
    {   0xdc,      0,  0, 0x62 }, /* Ü (U dieresis) */
    {   0xdd, 0x003c,  1, 0x5d }, /* Ý (Y acute) */

    {   0xdf,      0,  0, 0x22 }, /* ß (sharp s) */
    {   0xe0,      0,  0, 0x83 }, /* à (a grave) */
    {   0xe1,      0,  0, 0x9c }, /* á (a acute) */
    {   0xe2,      0,  0, 0x9d }, /* â (a circumflex) */
    {   0xe3,      0,  0, 0x9e }, /* ã (a tilde) */
    {   0xe4,      0,  0, 0x7f }, /* ä (a dieresis) */
    {   0xe5,      0,  0, 0x13 }, /* å (a with ring above) */

    {   0xe7,      0,  0, 0x84 }, /* ç (c cedilla) */
    {   0xe8,      0,  0, 0x08 }, /* è (e grave) */
    {   0xe9,      0,  0, 0x09 }, /* é (e acute) */
    {   0xea,      0,  0, 0x9f }, /* ê (e circumflex) */
    {   0xeb,      0,  0, 0xa0 }, /* ë (e dieresis) */
    {   0xec, 0x0048,  1, 0x6d }, /* ì (i grave) */
    {   0xed,      0,  0, 0xa1 }, /* í (i acute) */
    {   0xee,      0,  0, 0xa2 }, /* î (i circumflex) */
    {   0xef,      0,  0, 0xa3 }, /* ï (i dieresis) */

    {   0xf1,      0,  0, 0x81 }, /* ñ (n tilde) */
    {   0xf2,      0,  0, 0x0c }, /* ò (o grave) */
    {   0xf3,      0,  0, 0xa4 }, /* ó (o acute) */
    {   0xf4,      0,  0, 0xa5 }, /* ô (o circumflex) */
    {   0xf5,      0,  0, 0xa6 }, /* õ (o tilde) */
    {   0xf6,      0,  0, 0x80 }, /* ö (o dieresis) */
    {   0xf7, 0x0052,  1, 0x2f }, /* ÷ (division sign) */
    {   0xf8,      0,  0, 0x10 }, /* ø (o slash) */
    {   0xf9,      0,  0, 0x0a }, /* ù (u grave) */
    {   0xfa,      0,  0, 0xa7 }, /* ú (u acute) */
    {   0xfb, 0x0056,  1, 0x79 }, /* û (u circumflex) */
    {   0xfc,      0,  0, 0xa2 }, /* ü (u dieresis) */
    {   0xfd,      0,  0, 0xaf }, /* ý (y acute) */

    {   0xff, 0x0059,  1, 0x7d }, /* ÿ (y dieresis) */

    /* Runtime-definable characters */
    { 0xe000, 0x8000, 15, 0x24 }, /* variable character 0 */
    { 0xe001, 0x8001, 15, 0x24 }, /* variable character 1 */
    { 0xe002, 0x8002, 15, 0x24 }, /* variable character 2 */
    { 0xe003, 0x8003, 15, 0x24 }, /* variable character 3 */
    { 0xe004, 0x8004, 15, 0x24 }, /* variable character 4 */
    { 0xe005, 0x8005, 15, 0x24 }, /* variable character 5 */
    { 0xe006, 0x8006, 15, 0x24 }, /* variable character 6 */
    { 0xe007, 0x8007, 15, 0x24 }, /* variable character 7 */
    { 0xe008, 0x8008, 15, 0x24 }, /* variable character 8 */
    { 0xe009, 0x8009, 15, 0x24 }, /* variable character 9 */
    { 0xe00a, 0x800a, 15, 0x24 }, /* variable character 10 */
    { 0xe00b, 0x800b, 15, 0x24 }, /* variable character 11 */
    { 0xe00c, 0x800c, 15, 0x24 }, /* variable character 12 */
    { 0xe00d, 0x800d, 15, 0x24 }, /* variable character 13 */
    { 0xe00e, 0x800e, 15, 0x24 }, /* variable character 14 */
    { 0xe00f, 0x800f, 15, 0x24 }, /* variable character 15 */

    /* Icons and special symbols */
    { 0xe100, 0x0005, 14, 0x43 }, /* unknown icon (mirrored ?) */
    { 0xe101, 0x0006, 14, 0xd4 }, /* bookmark icon */
    { 0xe102, 0x0007, 14, 0x2d }, /* plugin icon */
    { 0xe103, 0x0008, 14, 0x34 }, /* folder icon */
    { 0xe104, 0x0009, 14, 0x7c }, /* firmware icon */
    { 0xe105, 0x000a, 14, 0x2f }, /* language icon */
    { 0xe106,      0,  0, 0xfc }, /* audio icon (note) */
    { 0xe107, 0x000c, 14, 0xd4 }, /* wps icon */
    { 0xe108, 0x000d, 14, 0xfa }, /* playlist icon */
    { 0xe109, 0x000e, 14, 0xfa }, /* text file icon */
    { 0xe10a, 0x000f, 14, 0xfa }, /* config icon */
    { 0xe10b,      0,  0, 0x88 }, /* left arrow */
    { 0xe10c,      0,  0, 0x89 }, /* right arrow */
    { 0xe10d,      0,  0, 0x86 }, /* up arrow */
    { 0xe10e,      0,  0, 0x87 }, /* down arrow */
    { 0xe10f,      0,  0, 0x88 }, /* filled left arrow */
    { 0xe110,      0,  0, 0x89 }, /* filled right arrow */
    { 0xe111,      0,  0, 0x86 }, /* filled up arrow */
    { 0xe112,      0,  0, 0x87 }, /* filled down arrow */
    { 0xe113,      0,  0, 0x24 }, /* level 0/7 */
    { 0xe114,      0,  0, 0x15 }, /* level 1/7 */
    { 0xe115,      0,  0, 0xdf }, /* level 2/7 */
    { 0xe116,      0,  0, 0xe0 }, /* level 3/7 */
    { 0xe117,      0,  0, 0xe1 }, /* level 4/7 */
    { 0xe118,      0,  0, 0xe2 }, /* level 5/7 */
    { 0xe119,      0,  0, 0xe3 }, /* level 6/7 */
    { 0xe11a,      0,  0, 0xec }, /* level 7/7 */
#endif /* !BOOTLOADER */

    /* no-char symbol */
    { 0xfffd,      0,  0, 0xd8 },
};

const unsigned char xfont_fixed[][8] = {
    /* Standard ascii */
    { 0x00, 0x10, 0x08, 0x04, 0x02, 0x01, 0x00, 0x00}, /* 0x000 \ */
    { 0x04, 0x0a, 0x11, 0x00, 0x00, 0x00, 0x00, 0x00}, /* 0x001 ^ */
    { 0x08, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00}, /* 0x002 ` */
    { 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x00}, /* 0x003 | */
    { 0x00, 0x00, 0x08, 0x15, 0x02, 0x00, 0x00, 0x00}, /* 0x004 ~ */

#ifndef BOOTLOADER /* bootloader only supports pure ASCII */
    /* Icons and special symbols */
    { 0x0c, 0x12, 0x12, 0x08, 0x08, 0x00, 0x08, 0x00}, /* 0x005 unknown icon */
    { 0x00, 0x03, 0x07, 0x0e, 0x1c, 0x08, 0x00, 0x00}, /* 0x006 bookmark icon */
    { 0x04, 0x1e, 0x07, 0x1f, 0x05, 0x01, 0x06, 0x00}, /* 0x007 plugin icon */
    { 0x0c, 0x13, 0x11, 0x11, 0x11, 0x11, 0x1f, 0x00}, /* 0x008 folder icon */
    { 0x1f, 0x11, 0x1b, 0x15, 0x1b, 0x11, 0x1f, 0x00}, /* 0x009 firmware icon */
    { 0x00, 0x1f, 0x15, 0x1f, 0x15, 0x1f, 0x00, 0x00}, /* 0x00a language icon */
    { 0x03, 0x05, 0x09, 0x09, 0x0b, 0x1b, 0x18, 0x00}, /* 0x00b audio icon (note) */
    { 0x01, 0x01, 0x02, 0x02, 0x14, 0x0c, 0x04, 0x00}, /* 0x00c wps icon */
    { 0x17, 0x00, 0x17, 0x00, 0x17, 0x00, 0x17, 0x00}, /* 0x00d playlist icon */
    { 0x1f, 0x00, 0x1f, 0x00, 0x1f, 0x00, 0x1f, 0x00}, /* 0x00e text file icon */
    { 0x0b, 0x10, 0x0b, 0x00, 0x1f, 0x00, 0x1f, 0x00}, /* 0x00f config icon */
    /* Latin 1 */
    { 0x04, 0x00, 0x04, 0x04, 0x04, 0x04, 0x04, 0x00}, /* 0x010 ¡ (inverted !) */
    { 0x04, 0x04, 0x0f, 0x10, 0x10, 0x0f, 0x04, 0x00}, /* 0x011 ¢ (cent sign) */
    { 0x06, 0x09, 0x08, 0x1e, 0x08, 0x08, 0x1f, 0x00}, /* 0x012 £ (pound sign) */
    { 0x00, 0x11, 0x0e, 0x0a, 0x0e, 0x11, 0x00, 0x00}, /* 0x013 ¤ (currency sign) */
    { 0x00, 0x05, 0x0a, 0x14, 0x0a, 0x05, 0x00, 0x00}, /* 0x014 « (left double-angle quotation mark) */
    { 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, /* 0x015 ¯ (macron) */
    { 0x04, 0x04, 0x1f, 0x04, 0x04, 0x00, 0x1f, 0x00}, /* 0x016 ± (plus-minus sign) */
    { 0x1c, 0x04, 0x1c, 0x10, 0x1c, 0x00, 0x00, 0x00}, /* 0x017 ³ (superscript 2) */
    { 0x1c, 0x04, 0x1c, 0x04, 0x1c, 0x00, 0x00, 0x00}, /* 0x018 ³ (superscript 3) */
    { 0x00, 0x09, 0x09, 0x09, 0x0f, 0x08, 0x10, 0x00}, /* 0x019 µ (micro sign) */
    { 0x00, 0x00, 0x00, 0x0c, 0x0c, 0x00, 0x00, 0x00}, /* 0x01a · (middle dot) */
    { 0x00, 0x14, 0x0a, 0x05, 0x0a, 0x14, 0x00, 0x00}, /* 0x01b » (right double-angle quotation mark) */
    { 0x11, 0x12, 0x14, 0x09, 0x13, 0x07, 0x01, 0x00}, /* 0x01c ¼ (one quarter) */
    { 0x11, 0x12, 0x17, 0x09, 0x17, 0x04, 0x07, 0x00}, /* 0x01d ½ (one half) */
    { 0x18, 0x09, 0x1a, 0x0d, 0x1b, 0x17, 0x01, 0x00}, /* 0x01e ¾ (three quarters) */
    { 0x04, 0x00, 0x04, 0x08, 0x10, 0x11, 0x0e, 0x00}, /* 0x01f ¿ (inverted ?) */
    { 0x08, 0x04, 0x0e, 0x11, 0x1f, 0x11, 0x11, 0x00}, /* 0x020 À (A grave) */
    { 0x02, 0x04, 0x0e, 0x11, 0x1f, 0x11, 0x11, 0x00}, /* 0x021 Á (A acute) */
    { 0x04, 0x0a, 0x0e, 0x11, 0x1f, 0x11, 0x11, 0x00}, /* 0x022 Â (a circumflex) */
    { 0x0d, 0x12, 0x0e, 0x11, 0x1f, 0x11, 0x11, 0x00}, /* 0x023 Ã (A tilde) */
    { 0x0a, 0x00, 0x04, 0x0a, 0x11, 0x1f, 0x11, 0x00}, /* 0x024 Ä (A dieresis) */
    { 0x04, 0x0a, 0x04, 0x0e, 0x11, 0x1f, 0x11, 0x00}, /* 0x025 Å (A with ring above) */
    { 0x0f, 0x14, 0x14, 0x1f, 0x14, 0x14, 0x17, 0x00}, /* 0x026 Æ (AE ligature) */
    { 0x0f, 0x10, 0x10, 0x10, 0x0f, 0x02, 0x0e, 0x00}, /* 0x027 Ç (C cedilla) */
    { 0x08, 0x04, 0x1f, 0x10, 0x1e, 0x10, 0x1f, 0x00}, /* 0x028 È (E grave) */
    { 0x02, 0x04, 0x1f, 0x10, 0x1c, 0x10, 0x1f, 0x00}, /* 0x029 É (E acute) */
    { 0x04, 0x0a, 0x1f, 0x10, 0x1c, 0x10, 0x1f, 0x00}, /* 0x02a Ê (E circumflex) */
    { 0x0a, 0x00, 0x1f, 0x10, 0x1c, 0x10, 0x1f, 0x00}, /* 0x02b Ë (E dieresis)*/
    { 0x08, 0x04, 0x0e, 0x04, 0x04, 0x04, 0x0e, 0x00}, /* 0x02c Ì (I grave) */
    { 0x02, 0x04, 0x0e, 0x04, 0x04, 0x04, 0x0e, 0x00}, /* 0x02d Í (I acute) */
    { 0x04, 0x0a, 0x0e, 0x04, 0x04, 0x04, 0x0e, 0x00}, /* 0x02e Î (I circumflex) */
    { 0x0a, 0x00, 0x0e, 0x04, 0x04, 0x04, 0x0e, 0x00}, /* 0x02f Ï (I dieresis) */
    { 0x0c, 0x0a, 0x09, 0x1d, 0x09, 0x0a, 0x0c, 0x00}, /* 0x030 Ð (ETH) */
    { 0x0d, 0x12, 0x00, 0x19, 0x15, 0x13, 0x11, 0x00}, /* 0x031 Ñ (N tilde) */
    { 0x08, 0x04, 0x0e, 0x11, 0x11, 0x11, 0x0e, 0x00}, /* 0x032 Ò (O grave) */
    { 0x02, 0x04, 0x0e, 0x11, 0x11, 0x11, 0x0e, 0x00}, /* 0x033 Ó (O acute) */
    { 0x04, 0x0a, 0x0e, 0x11, 0x11, 0x11, 0x0e, 0x00}, /* 0x034 Ô (O circumflex) */
    { 0x0d, 0x12, 0x0e, 0x11, 0x11, 0x11, 0x0e, 0x00}, /* 0x035 Õ (O tilde) */
    { 0x0a, 0x00, 0x0e, 0x11, 0x11, 0x11, 0x0e, 0x00}, /* 0x036 Ö (O dieresis) */
    { 0x01, 0x0e, 0x13, 0x15, 0x19, 0x0e, 0x10, 0x00}, /* 0x037 Ø (O stroke) */
    { 0x08, 0x04, 0x11, 0x11, 0x11, 0x11, 0x0e, 0x00}, /* 0x038 Ù (U grave) */
    { 0x02, 0x04, 0x11, 0x11, 0x11, 0x11, 0x0e, 0x00}, /* 0x039 Ú (U acute) */
    { 0x0a, 0x00, 0x11, 0x11, 0x11, 0x11, 0x0e, 0x00}, /* 0x03a Ü (U dieresis) */
    { 0x0a, 0x00, 0x11, 0x11, 0x11, 0x11, 0x0e, 0x00}, /* 0x03b Ü (U dieresis) */
    { 0x02, 0x04, 0x11, 0x11, 0x0a, 0x04, 0x04, 0x00}, /* 0x03c Ý (Y acute) */
    { 0x08, 0x04, 0x0e, 0x01, 0x0f, 0x11, 0x0f, 0x00}, /* 0x03d à (a grave) */
    { 0x02, 0x04, 0x0e, 0x01, 0x0f, 0x11, 0x0f, 0x00}, /* 0x03e á (a acute) */
    { 0x04, 0x0a, 0x0e, 0x01, 0x0f, 0x11, 0x0f, 0x00}, /* 0x03f â (a circumflex) */
    { 0x0d, 0x12, 0x0e, 0x01, 0x0f, 0x11, 0x0f, 0x00}, /* 0x040 ã (a tilde) */
    { 0x0a, 0x00, 0x0e, 0x01, 0x0f, 0x11, 0x0f, 0x00}, /* 0x041 ä (a dieresis) */
    { 0x04, 0x0a, 0x0e, 0x01, 0x0f, 0x11, 0x0f, 0x00}, /* 0x042 å (a with ring above) */
    { 0x00, 0x0f, 0x10, 0x10, 0x0f, 0x02, 0x04, 0x00}, /* 0x043 ç (c cedilla) */
    { 0x08, 0x04, 0x0e, 0x11, 0x1f, 0x10, 0x0e, 0x00}, /* 0x044 è (e grave) */
    { 0x02, 0x04, 0x0e, 0x11, 0x1f, 0x10, 0x0e, 0x00}, /* 0x045 é (e acute) */
    { 0x04, 0x0a, 0x0e, 0x11, 0x1f, 0x10, 0x0e, 0x00}, /* 0x046 ê (e circumflex) */
    { 0x0a, 0x00, 0x0e, 0x11, 0x1f, 0x10, 0x0e, 0x00}, /* 0x047 ë (e dieresis) */
    { 0x08, 0x04, 0x00, 0x0c, 0x04, 0x04, 0x0e, 0x00}, /* 0x048 ì (i grave) */
    { 0x02, 0x04, 0x00, 0x0c, 0x04, 0x04, 0x0e, 0x00}, /* 0x049 í (i acute) */
    { 0x04, 0x0a, 0x00, 0x0c, 0x04, 0x04, 0x0e, 0x00}, /* 0x04a î (i circumflex) */
    { 0x0a, 0x00, 0x00, 0x0c, 0x04, 0x04, 0x0e, 0x00}, /* 0x04b ï (i dieresis) */
    { 0x0d, 0x12, 0x00, 0x16, 0x19, 0x11, 0x11, 0x00}, /* 0x04c ñ (n tilde) */
    { 0x08, 0x04, 0x00, 0x0e, 0x11, 0x11, 0x0e, 0x00}, /* 0x04d ò (o grave) */
    { 0x02, 0x04, 0x00, 0x0e, 0x11, 0x11, 0x0e, 0x00}, /* 0x04e ó (o acute) */
    { 0x04, 0x0a, 0x00, 0x0e, 0x11, 0x11, 0x0e, 0x00}, /* 0x04f ô (o circumflex) */
    { 0x0d, 0x12, 0x00, 0x0e, 0x11, 0x11, 0x0e, 0x00}, /* 0x050 õ (o tilde) */
    { 0x00, 0x0a, 0x00, 0x0e, 0x11, 0x11, 0x0e, 0x00}, /* 0x051 ö (o dieresis) */
    { 0x00, 0x04, 0x00, 0x1f, 0x00, 0x04, 0x00, 0x00}, /* 0x052 ÷ (division sign) */
    { 0x00, 0x02, 0x0e, 0x15, 0x15, 0x0e, 0x08, 0x00}, /* 0x053 ø (o slash) */
    { 0x08, 0x04, 0x00, 0x11, 0x11, 0x13, 0x0d, 0x00}, /* 0x054 ù (u grave) */
    { 0x02, 0x04, 0x00, 0x11, 0x11, 0x13, 0x0d, 0x00}, /* 0x055 ú (u acute) */
    { 0x04, 0x0a, 0x00, 0x11, 0x11, 0x13, 0x0d, 0x00}, /* 0x056 û (u circumflex) */
    { 0x00, 0x0a, 0x00, 0x11, 0x11, 0x13, 0x0d, 0x00}, /* 0x057 ü (u dieresis) */
    { 0x02, 0x04, 0x11, 0x11, 0x0f, 0x01, 0x0e, 0x00}, /* 0x058 ý (y acute) */
    { 0x0a, 0x00, 0x11, 0x11, 0x0f, 0x01, 0x0e, 0x00}, /* 0x059 ÿ (y dieresis) */
#endif /* !BOOTLOADER */
};

void lcd_charset_init(void)
{
    if (is_new_player())
    {
        hw_pattern_count = 8;
        xchar_info = xchar_info_newlcd;
        xchar_info_size = sizeof(xchar_info_newlcd)/sizeof(struct xchar_info);
    }
    else /* old lcd */
    {
        hw_pattern_count = 4;
        xchar_info = xchar_info_oldlcd;
        xchar_info_size = sizeof(xchar_info_oldlcd)/sizeof(struct xchar_info);
    }
}
