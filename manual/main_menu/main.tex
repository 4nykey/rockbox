% $Id$ %
\chapter{The Main Menu}

\section{Introducing the Main Menu}
\screenshot{main_menu/images/ss-main-menu}{The main menu}{}
This is the screen from which the rest of the Rockbox functions can be 
accessed. It is used for a variety of functions, which are detailed below. 
All options in Rockbox can be controlled via this menu.

All settings are persistently stored on the unit. However, Rockbox does 
not spin up the disk solely for the purpose of saving settings, but instead 
will save them when it spins up the disk the next time, for example when 
refilling the MP3 buffer or navigating through the file browser. Changes to 
settings may therefore not be saved unless the \dap\ is shut down safely 
(see page \pageref{ref:Safeshutdown}).

\section{Navigating the Main Menu}
\opt{RECORDER_PAD,ONDIO_PAD,IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD,IPOD_4G_PAD}{
  \begin{table}
    \begin{btnmap}{}{}
      \opt{IPOD_4G_PAD}{\ButtonScrollFwd}
      \opt{RECORDER_PAD,ONDIO_PAD,IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}{\ButtonUp} 
      & Moves up in the menu.\\
      & Inside a setting, increases the value or
        chooses next option \\
      %
      \opt{IPOD_4G_PAD}{\ButtonScrollBack}
      \opt{RECORDER_PAD,ONDIO_PAD,IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}{\ButtonDown} 
      & Moves down in the menu.\\
      & Inside a setting, decreases the value or
        chooses previous option \\
      %
      \opt{RECORDER_PAD}{\ButtonPlay/\ButtonRight}
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}{\ButtonSelect/\ButtonRight}
      \opt{ONDIO_PAD,IPOD_4G_PAD}{\ButtonRight} 
      & Selects option \\
      %
      \opt{RECORDER_PAD,IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonOff/\ButtonLeft}
      \opt{IAUDIO_X5_PAD,ONDIO_PAD,IPOD_4G_PAD}{\ButtonLeft} 
      & Exits menu, setting or moves to parent menu\\
    \end{btnmap}
  \end{table}
}
\opt{PLAYER_PAD}{
  \begin{table}
    \begin{btnmap}{}{}
      %
      \ButtonLeft  & Selects previous option in the menu.\\
                   & Inside an setting, decreases the value or chooses previous option \\
      %
      \ButtonRight & Selects next option in the menu.\\
                   & Inside an setting increases the value or chooses next option \\
      %
      \ButtonPlay  & Selects item \\
      %
      \ButtonStop  & Exit menu, setting or moves to parent menu.\\
    \end{btnmap}
  \end{table}
}

\section {Recent Bookmarks}
\screenshot{main_menu/images/ss-list-bookmarks}%
  {The list bookmarks screen}{}
If the ``save a list of recently created bookmarks'' option is enabled 
then you can view a list of several recent bookmarks here and select one to 
jump straight to that track. See page \pageref{ref:Bookmarkconfigactual} 
for more details on configuring bookmarking in Rockbox.
\note{This option is off by default.}

\section{Sound Settings}
The Sound Settings menu offers a selection of sound properties you may 
change to customize your listening experience.  The details of this menu are 
covered in detail starting on page \pageref{ref:configure_rockbox_sound}. 

\section{General Settings}
The General Settings menu allows you to customize the way Rockbox looks and 
the way it plays music.  The details of this menu are covered in detail 
starting on page \pageref{ref:configure_rockbox_general}.

\section{Manage Settings}
This option allows the saving and re-loading of user configuration settings, 
browse the hard drive for alternate firmwares, and finally to reset your 
\dap\ back to initial configuration. The details of this menu are covered in detail 
starting on page \pageref{ref:ManageSetting}.

\section{Browse Themes}
This option will display all the currently installed themes on the \dap, 
press \ButtonRight\ to load the chosen theme and apply it.

A Theme is basically a configuration file, stored in a specific directory, 
that typically changes the WPS 
\opt{h1xx,h300,x5}{and remote WPS}, font used and on some platforms
additional information such as background image and text colours.

There are a number of such themes that ship with Rockbox, and if none of
these suit your needs, many more can be downloaded from 
\url{www.rockbox.org/twiki/bin/view/Main/\opt{RECORDER_PAD}{/WpsArchos}
\opt{h1xx}{WpsIriverH100}\opt{h300,ipodcolor}{WpsIriverH300}
\opt{ipodvideo}{WpsIpod5g}\opt{ipodnano}{WpsIpodNano}
\opt{ipodmini}{WpsIpodMini}\opt{x5}{WpsIaudioX5}}. 
Some of the downloads from this site will actually be standalone WPS files, 
others will be full-blown themes. 

\note{Themes do not have to be purely visual.  It is quite possible to create
a theme that switches between audio configurations for use in the car, with
headphones and when connected to an external amplifier.  See the section on 
``Making Your Own Settings File'' on page \pageref{ref:CreateYourOwnWPS} 
for more details. 
}

      
\opt{CONFIG_TUNER}{
  \section{\label{ref:FMradio}FM Radio \opt{ondio}{(OndioFM Only)}}  
  \opt{x5}{\note{Not currently Implemented on X5}}

  \screenshot{main_menu/images/ss-fm-radio-screen}{The FM radio screen}{}
  
  This menu option switches to the radio screen.
  
  The FM radio has the ability \opt{HAVE_RECORDING}{to record and } to
  remember station frequency settings (presets).

  \opt{recorderv2fm,ondio}{   
    \begin{table}
      \begin{btnmap}{}{}
          \ButtonLeft, \ButtonRight 
          & Change frequency in 0.1 MHz steps.\\
          & For automatic station seek, hold \ButtonLeft/\ButtonRight\ %
            for a little longer. \\
          %
          \ButtonUp, \ButtonDown    
          & Change volume \\
          %
          \opt{RECORDER_PAD}{
            \ButtonPlay      & \emph{(EXPERIMENTAL)}\\
            & freezes all screen updates.May enhance radio reception
              in some cases.\\
          }
          \opt{RECORDER_PAD}{\ButtonOn}\opt{ONDIO_PAD}{\ButtonOff}
          & Leave the radio screen with the radio playing \\
          %
	   \opt{RECORDER_PAD}{\ButtonOff}\opt{ONDIO_PAD}{hold \ButtonOff}
          & Back to Main Menu.\\
       \end{btnmap}
    \end{table}
  }
  \fixme{Add Radio recording and Preset keys to FM Recorder and Ondio FM}
  
  \opt{h1xx,h300,x5}{
    \begin{table}
      \begin{btnmap}{}{}
          \ButtonLeft, \ButtonRight & Change frequency in 0.1 MHz steps. \\
          Hold \ButtonLeft, \ButtonRight 
                             & Seeks to next station or preset\\
          %
          \ButtonUp, \ButtonDown 
                             & Change volume \\
          %
          \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonOn}
          \opt{IAUDIO_X5_PAD}{\fixme{TBD}}
                             & Mutes radio playback \\
          %
          \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{Hold \ButtonOn}
          \opt{IAUDIO_X5_PAD}{\fixme{TBD}}
          & Switches between SCAN and PRESET mode.\\
          %
          \ButtonSelect      & Opens a list of radio presets. You can view 
                               all the presets that you have, and switch to 
                               the station.\\
          Hold \ButtonSelect & Displays the FM radio settings menu.\\
          %
          \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonMode}
          \opt{IAUDIO_X5_PAD}{\fixme{TBD}}
          %
                             & Keeps radio playing and returns to the main
                               menu. You can then press OFF/STOP to browse 
                               the file tree while listening to the radio\\
          %
          \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonOff}
          \opt{IAUDIO_X5_PAD}{\fixme{TBD}}
                             & Stops the radio and returns to Main Menu.\\
       \end{btnmap}
    \end{table}
  }
  
  \begin{description}
    
  \item[Saving a preset:]
    Up to 32 of your favourite stations can be saved as presets. 
    Press
    \opt{RECORDER_PAD}{\ButtonFOne}
    \opt{ONDIO_PAD}{\ButtonMenu}
    \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}{\ButtonSelect}
    to go to the menu, then select 
    \opt{recorderv2fm,ondio}{``Save preset''.}
    \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}{``Add preset''}
    Enter the name (maximum number of characters is 32). 
    \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{Press \ButtonOn\ to save.}
    \opt{IAUDIO_X5_PAD}{Press \fixme{TBD} to save.}
    
  \item[Selecting a preset:]
    \opt{ONDIO_PAD,RECORDER_PAD}
       {         
         Press \opt{RECORDER_PAD}{\ButtonFTwo}\opt{ONDIO_PAD}{\fixme{FixMe}}
         to go to the preset list. Use \ButtonUp\ and \ButtonDown\ to 
         move the cursor and then press 
         \opt{RECORDER_PAD}{\ButtonPlay}\opt{ONDIO_PAD}{\fixme{FixMe}}
         to select. Use \ButtonLeft\ to leave the preset without selecting
         anything.
       }
     \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}
        {
          Press \ButtonSelect\ to go to the preset list. 
          Use \ButtonUp\ and \ButtonDown\ to move the cursor and then 
          press \ButtonSelect\ to select. Use \ButtonLeft\ to leave the
          preset without selecting anything.
        }
            
  \item[Removing a preset:]
     \opt{ONDIO_PAD,RECORDER_PAD}{
        Press \opt{RECORDER_PAD}{\ButtonFOne}\opt{ONDIO_PAD}{\fixme{FixMe}}
        to go to the menu, then select ``Remove preset''.
      }
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}{
        Press \ButtonSelect\ to go to the preset list. Use \ButtonUp\ 
        and \ButtonDown\ to move the cursor and then Hold \ButtonSelect\ 
        on the preset to that you wish to remove, then select ``Remove preset.''
      }
     
      \opt{RECORDER_PAD}{
          \item[Recording:]
            Press \ButtonFThree\ to start recording the currently playing 
            station. Press \ButtonOff\ to stop recording. Press \ButtonPlay\ 
            again to seamlessly start recording to a new file. The settings
            for the recording can be changed in the \ButtonFOne\ menu before
            starting the recording. See page \pageref{ref:Recordingsettings} 
            for details of recording settings.
          }
  \end{description}
  \note{The radio will turn off when starting playback of an audio file.}
}

\opt{HAVE_RECORDING}{

  \section{\label{ref:Recording}Recording}
  \opt{x5}{\note{Not Implemented on X5 yet}}
  \subsection{\label{ref:Whilerecordingscreen}While Recording Screen}
  \screenshot{main_menu/images/ss-while-recording-screen}{The while recording screen}{}
  Entering the ``Recording'' option in the Main menu launches the recording 
    application. The screen shows the time elapsed and the size of the file being 
    recorded. A peak meter is present to allow you set Gain correctly.
  \opt{MASCODEC}{The frequency, channels and quality}
  \opt{SWCODEC}{The frequency and channels} settings are shown on the last line.
  
  The controls for this screen are:
  
    \begin{table}
      \begin{btnmap}{}{}
        \ButtonLeft & Decreases Gain \\
        %
        \ButtonRight & Increases Gain \\
        %
        \opt{RECORDER_PAD,IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonOn}
        \opt{ONDIO_PAD,IAUDIO_X5_PAD,IPOD_4G_PAD}{\fixme{FixMe}} & Starts recording.  \\
        & While recording: button closes the current file and opens a new one.\\
        %
        \opt{RECORDER_PAD,IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonOff} 
        \opt{ONDIO_PAD,IAUDIO_X5_PAD,IPOD_4G_PAD}{\fixme{FixMe}} & Exits Recording Screen.\\
        & While recording: Stop recording \\
        %
        \opt{RECORDER_PAD}{\ButtonFOne}
        \opt{ONDIO_PAD}{\ButtonMenu}
        \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IPOD_4G_PAD,IAUDIO_X5_PAD}{Hold \ButtonSelect} 
        & Opens Recording Settings screen (see below) \\
        %
        \opt{RECORDER_PAD}{
          \ButtonFTwo & Quick menu for recording settings. A quick press will 
          leave the screen up (press {\ButtonFTwo} again to exit),while holding 
          it will close the screen when you release it. \\
        }
        %
        \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IPOD_4G_PAD,IAUDIO_X5_PAD}{
          \ButtonSelect & Quick menu for recording settings. \\
        }
        %
        \opt{RECORDER_PAD}{
          \ButtonFThree & Quick menu for source setting. \\
          & Quick/hold works as for {\ButtonFTwo}. \\
          & While recording: Start a new recording file \\
        }
      \end{btnmap}
  \end{table}
  
  \subsection{\label{ref:Recordingsettings}Recording Settings}
  \screenshot{main_menu/images/ss-recording-settings}{The recording settings screen}{}
  
  \opt{MASCODEC}{
    \begin{description}
    \item[Quality:]
      Choose the quality here (0 to 7). Default is 5, best quality is 7, 
      smallest file size is 0. This setting effects how much your sound 
      sample will be compressed. Higher quality settings result in larger 
      MP3 files.
      
      The quality setting is just a way of selecting an average bit rate, 
      or number of  bits per second, for a recording.  When  this setting 
      is lowered, recordings are compressed more (meaning worse sound quality), 
      and the average bitrate changes as follows.
    \end{description}
    
    \begin{table}[h!]
      \begin{center}
        \begin{tabularx}{0.75\textwidth}{lX}\toprule
          \emph{Frequency} & \emph{Bitrate} (Kbit/s) -- quality 0$\rightarrow$7 \\\midrule
          44100Hz stereo        & 75, 80, 90, 100, 120, 140, 160, 170 \\
          22050Hz stereo        & 39, 41, 45, 50,  60,  80,  110, 130 \\
          44100Hz mono          & 65, 68, 73, 80,  90,  105, 125, 140 \\
          22050Hz mono          & 35, 38, 40, 45,  50,  60,  75,  90 \\\bottomrule
        \end{tabularx}
      \end{center}
    \end{table}
  }
  
  \begin{description}
  \item[Frequency:]
    Choose the recording frequency (sample rate) -- 48kHz, 44.1kHz, 32kHz and
    24kHz, 22.05kHz, 16kHz are available. Higher sample rates use up more disk
    space, but give better sound quality.
    This setting determines which frequency range can accurately be reproduced
    during playback, Lower frequencies produce smaller files.
    \opt{MASCODEC}{
     The frequency setting also determines which version of the MPEG standard 
     the sound is recorded using:\\
     MPEG v1 for 48, 44.1 and 32\\
     MPEG v2 for 24, 22.05 and 16\\
    }
    
  \item[Source:]
    Choose the source of the recording. This can be 
    \opt{recorder,recorderv2fm,h1xx}{SPDIF (digital),} microphone or line in.
    \opt{CONFIG_TUNER}{For recording from the radio see page \pageref{ref:FMradio}.}
    
    \opt{recorder,recorderv2fm,h100}
        {\note{You cannot change the sample rate for digital recordings.}}
    
  \item[Channels:]
    This allows you to select mono or stereo recording. Please note that 
    for mono recording, only the left channel is recorded.  Mono recordings
    are usually somewhat smaller than stereo.
    
  \item[Independent Frames:]
    The independent frames option tells the \dap\ to encode with the bit
    reservoir disabled, so the frames are independent of each other. This
    makes a file easier to edit.
    
  \item[Time Split:]
    This option is useful when timing recordings. If set to active it stops 
    a recording at a given interval and then starts recording again with a 
    new file, which is useful for long term recordings.
    \newline
    The splits are seamless (frame accurate), no audio is lost at the split 
    point. The break between recordings is only the time required to stop
    and restart the recording, on the order of 2 -- 4 seconds.
    \newline
    Options (hours:minutes between splits): off, 24:00, 18:00, 12:00, 10:00, 
    8:00, 6:00, 4:00, 2:00, 1:20 (80 minute CD), 1:14 (74 minute  CD), 1:00, 
    00:30, 00:15, 00:10, 00:05.
    
  \item[Prerecord Time:]
    This setting buffers a small amount of audio so that when the record button 
    is pressed, the recording will begin from that number of seconds earlier.
    This is useful for ensuring that a recording begins before a cue that is
    being waited for.\\
    Options: Off, 1 -- 30 seconds
    
  \item[Directory:]
    Allows changing the location where the recorded files are saved. The
    default location is \fname{/recordings}.
    
  \item[Show recording screen on startup:]
    If set to yes, the \dap\ will start up with the while recording screen 
    showing.\\
    Options: Yes, No\\
    
  \item[Clipping Light:]
    Causes the backlight to flash on when clipping has been detected.\\
    Options: Off, Remote unit only, Main and remote unit, Main unit only.
    
  \end{description}
}
 
\section{\label{ref:playlistoptions}Playlist Options}
  This menu allows you to work with playlists. Playlists can either be created
automatically by playing a file in a directory directly, which will cause all 
of the files in that directory to be placed in the playlist, or they can be
created by hand using the File Menu (see page \pageref{ref:Filemenu}) or using 
the Playlist Options menu.  Both  automatic and manually created playlists 
can be edited using this menu.

\begin{description}
\item[Create Playlist:]
  Rockbox will create a playlist with all tracks in the current directory 
and all subdirectories. The playlist will be created one folder level ``up'' 
from where you currently are.
  
\item[View Current Playlist:]
  Displays the contents of the playlist currently stored in memory.
  
\item[Save Current Playlist:]
  Saves the current dynamic playlist, excluding queued tracks, to the 
specified file. If no path is provided then playlist is saved to current 
directory (see page \pageref{ref:Playlistsubmenu}).
  
\item[Recursively Insert Directories: ]
  If set to ON then when you insert/queue a directory in Dynamic Playlist, 
all subdirectories will also be inserted. If set to ASK then you are prompted 
about recursive insertion when inserting a directory.
  Options: Off, Ask, On

\item[Warn When Erasing Dynamic Playlist: ]
  \fixme{some information about this function....}
  Options: Yes, No
\end{description}

\section{Browse Plugins}
  With this option you can load and run various plugins that have been
written for Rockbox. There are a wide variety of these supplied with
Rockbox, including several games, some impressive demo's and a number of
utilities. A detailed description of the different plugins begins 
on page \pageref{ref:plugins}.

\section{\label{ref:Info}Info}
  This option shows RAM buffer size, battery voltage level and estimated time
remaining, disk total space and disk free space.
\opt{player}{Use the MINUS and PLUS keys to step through several 
pages of information.}

\begin{description}
\item[Rockbox Info:]
  Displays some basic system information.  This is, from top to bottom, 
the amount of memory Rockbox has available for storing music (the buffer),
battery status, hard disk size and the amount of free space on the disk.
  
\item[Version:]
  Software version and credits display.
  
\item[Debug (Keep Out!):]
  This submenu is intended to be used \emph{only} by Rockbox developers.
  It shows hardware, disk, battery status and a lot of other information.  
  \warn{It is not recommended that users access this menu unless instructed to
  do so in the course of fixing a problem with Rockbox. If you think you've 
  messed up your settings by use of this menu please try to reset \emph{all} 
  settings before asking for help.}
\end{description}

\opt{player}{
  \section{Shutdown}
  This menu option saves the Rockbox configuration and turns off the hard 
  drive before shutting down the machine. For maximum safety this procedure 
  is recommended when turning off the Jukebox. (There is a very small risk
  of hard disk corruption otherwise.) See page \pageref{ref:Safeshutdown}
  for more details.
}

\opt{RECORDER_PAD,IRIVER_H100_PAD,IRIVER_H300_PAD,IPOD_4G_PAD,IAUDIO_X5_PAD}{
\section{Quick Menu}
  Whilst not strictly part of the main menu, it is worth noting that a few
  of the more commonly used settings are available from the ''Quick Menu".
  This screen is accessed by holding the 
    \opt{RECORDER_PAD}{\ButtonFTwo}
    \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonMode}
    \opt{IPOD_4G_PAD}{\ButtonMenu}
    \opt{IAUDIO_X5_PAD}{\ButtonRec}
   key, and it allows rapid access to the Shuffle and Repeat Modes 
  (Page \pageref{ref:PlaybackOptions})
  and the Show Files options (Page \pageref{ref:ShowFiles}).
}

