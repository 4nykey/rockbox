% $Id$ %
\section{\label{ref:WPS}While Playing Screen}
The While Playing Screen (WPS) displays various pieces of information about the
currently playing audio file.
%
\opt{HAVE_LCD_BITMAP}{%
  The appearance of the WPS can be configured using WPS configuration files.
  The items shown depend on your configuration -- all item can be turned on
  or off independently. Refer to \reference{ref:wps_tags} for details on how
  to change the display of the WPS.
  \begin{itemize}
    \nopt{ondio}{
    \item Status bar: The Status bar shows Battery level, charger status, 
      volume, play mode, repeat mode, shuffle mode\opt{CONFIG_RTC}{ and clock}.
      In contrast to all other items, the status bar is always at the top of
      the screen.
    }
    \opt{ondio}{
    \item Status bar: The Status bar shows Battery level, USB power mode, key
      lock status, memory access indicator. In contrast to all other items, the
      status bar is always at the top of the screen.
    }
  \item (Scrolling) path and filename of the current song.
  \item The ID3 track name.
  \item The ID3 album name.
  \item The ID3 artist name.
  \item Bit rate. VBR files display average bitrate and ``(avg)''
  \item Elapsed and total time.
  \item A slidebar progress meter representing where in the song you are.
  \item Peak meter.
  \end{itemize}
}
\opt{recorder,recorderv2fm,ondio}{
  \note{
  \begin{itemize}
  \item The number of lines shown depends on the size of the font used.
  \item The peak meter is only visible if you turn off the status bar or if
    using a small font that gives 8 or more display lines.
  \end{itemize}
  }
}
%
\opt{player}{
  \note{
  \begin{itemize}
  \item Playlist index/Playlist size: Artist {}- Title.
  \item Current{}-time Progress{}-indicator Left.
  \end{itemize}
  }
}

See \reference{ref:ConfiguringtheWPS} for details of customising
your WPS (While Playing Screen).


\subsection{\label{ref:WPS_Key_Controls}WPS Key Controls}

\begin{table}
  \begin{btnmap}{}{}
      \ActionWpsVolUp{} / \ActionWpsVolDown & Volume up/down.\\
      %
      \ActionWpsSkipPrev & Go to beginning of track, or if pressed while in the
        first seconds of a track, go to previous track.\\
      %
      \ActionWpsSeekBack & Rewind in track.\\
      %
      \ActionWpsSkipNext & Go to next track.\\
      %
      \ActionWpsSeekFwd & Fast forward in track.\\
      %
      \ActionWpsPlay & Toggle play/pause.\\
      %
      \ActionWpsStop & Stop playback.\\
      %
      \ActionWpsBrowse & Return to the \setting{File Browser}.\\%
      %
      \nopt{PLAYER_PAD}{\ActionWpsContext & Enter \setting{WPS Context Menu}.\\}%
      %
      \opt{RECORDER_PAD,IRIVER_H100_PAD,IRIVER_H300_PAD,IRIVER_H10_PAD}{%
        \ActionWpsPitchScreen & Show pitch setting screen.\\}%
      %
      \opt{ONDIO_PAD}{\ActionWpsContext{} twice}%
      \nopt{ONDIO_PAD}{\ActionWpsMenu}%
      & Enter \setting{Main Menu}%
      \opt{ONDIO_PAD}{ via the \setting{WPS Context Menu}}.\\%
      %
      \nopt{PLAYER_PAD,ONDIO_PAD}{%
        \ActionWpsQuickScreen & Enter \setting{Quick Screen}.\\}%
      %
      %These actions need definitions for the other targets
      \opt{RECORDER_PAD}{%
        \ButtonFThree & Toggles Display quick menu.\\%
        \ButtonFOne+\ButtonDown & Key lock on/off.\\%
        \ButtonFOne+\ButtonPlay & Mute on/off.\\%
      }%
      \opt{PLAYER_PAD}{%
        \ButtonMenu+\ButtonStop & Key lock on/off.\\%
        \ButtonMenu+\ButtonPlay & Mute on/off.\\%
      }%
      \opt{ONDIO_PAD}{%
        Hold \ButtonMenu+\ButtonDown & Key lock on/off.\\%
      }%
      \opt{PLAYER_PAD,RECORDER_PAD,IRIVER_H100_PAD,IRIVER_H300_PAD,IRIVER_H10_PAD}{%
        \ActionWpsIdThreeScreen & Enter \setting{ID3 Viewer}.\\%
      }%
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{%
        \ActionWpsAbSetBNextDir & Skip to the next directory.\\%
        \ActionWpsAbSetAPrevDir & Skip to the previous directory.\\%
      }%
    \end{btnmap}
\end{table}


\opt{HAVE_LCD_BITMAP}{
  \subsection{\label{ref:peak_meter}Peak Meter}
  The peak meter can be displayed on the While Playing Screen and consists of
  several indicators. 
  \opt{HAVE_RECORDING}{
    For a picture of the peak meter, please see the While
    Recording Screen in \reference{ref:while_recording_screen}.
  }
  
  \begin{description}
  \item [The bar:]
    This is the wide horizontal bar. It represents the current volume value.
  \item [The peak indicator:]
    This is a little vertical line at the right end of the bar. It indicates 
    the peak volume value that occurred recently.
  \item [The clip indicator:]
    This is a little black block that is displayed at the very right of the
    scale when an overflow occurs. It usually does not show up during normal
    playback unless you play an audio file that is distorted heavily. If you
    encounter clipping while recording, your recording will sound distorted. You
    should lower the gain. 
    \note{Note that the clip detection is not very precise.
     Clipping might occur without being indicated.}
  \item [The scale:]
    Between the indicators of the right and left channel there are little dots.
    These dots represent important volume values. In linear mode each dot is a
    10\% mark. In dbfs mode the dots represent the following values (from right
    to left): 0db, {}-3db, {}-6db, {}-9db, {}-12db, {}-18db, {}-24db, {}-30db,
    {}-40db, {}-50db, {}-60db.
  \end{description}
}
\subsection{\label{sec:contextmenu}The WPS Context Menu}
Like the context menu for the \setting{File Browser}, the \setting{WPS Context Menu} 
allows you quick access to some often used functions:

\subsubsection{Sound Settings}
This is a shortcut to the \setting{Sound Settings Menu}, where you can configure volume,
bass, treble, and other settings affecting the sound of your music.  
See \reference{ref:configure_rockbox_sound} for more information.

\subsubsection{Playlist}
The \setting{Playlist} submenu allows you to view, save, search and
reshuffle the current playlist. To change settings for the
\setting{Playlist Viewer} press \ActionStdMenu{} while viewing the playlist
to bring up the \setting{Playlist Viewer Menu}.
    
    \subsubsection{Playlist catalog}
    \fixme{Add description of Playlist catalog}
      \begin{description}
        \item [View catalog]
        \item [Add to playlist]
        \item [Add to new playlist]
      \end{description}
\subsubsection{Rating}
The menu entry is only shown if \setting{Gather Runtime Information} is enabled. It allows the 
asignment of a personal rating value (0..10) to a track which can be displayed in the WPS (%rr)
and is used in the Database browser. Press \ButtonRight to increment the value (it wraps at 10).

\subsubsection{Bookmarks}
This allows you to create a bookmark in the currently-playing track.

\subsubsection{\label{ref:ID3viewer}Show ID3 info}
\screenshot{rockbox_interface/images/ss-id3-viewer}{The ID3 viewer}{}
This screen is accessible from the WPS screen, and provides a detailed view of
all the identity information about the current track. This info is known as
meta data and is stored in audio file formats to keep information on artist,
album etc. To access this screen, % 
\opt{PLAYER_PAD,RECORDER_PAD,IRIVER_H100_PAD,IRIVER_H300_PAD,IRIVER_H10_PAD}{
  press \ActionWpsIdThreeScreen. }%
\opt{ONDIO_PAD,IPOD_4G_PAD,IPOD_3G_PAD,IAUDIO_X5_PAD}{press \ActionWpsContext{}
  to access the \setting{WPS Context Menu} and select
  \setting{Show ID3 info}. }%
\opt{RECORDER_PAD,PLAYER_PAD,ONDIO_PAD}{Use \ButtonLeft\ and \ButtonRight\
  to move through the information.}%
\subsubsection{Open With...}
This \setting{Open With} function is the same as the \setting{Open With} 
function in the \setting{File Context Menu}.

\nopt{player}{
  \subsubsection{\label{sec:pitchscreen}Pitch}
  
  The Pitch Screen allows you to change the pitch and (at the same time) the
  playback speed of your \dap. The pitch value can be adjusted between 50\% and
  200\%. 50\% means half the normal playback speed and the pitch that's an
  octave lower than the normal pitch. 200\% means double playback speed and the
  pitch that's an octave higher than the normal pitch. It's not possible to
  change the pitch without changing the playback speed and vice versa. Changing
  the pitch can be done in two modes: procentual and semitone. Initially (after
  the \dap{} is switched on), procentual mode is active.
  
  \begin{table}
    \begin{btnmap}{}{}
      \ActionPsToggleMode
      & Toggle pitch changing mode \\
      %
      \ActionPsIncSmall{} / \ActionPsDecSmall
      & Increase / Decrease pitch by 0.1\% (in procentual mode) or a semitone
        (in semitone mode)\\
      %
      \ActionPsIncBig{} / \ActionPsDecBig
      & Increase / Decrease pitch by 1\% (only in procentual mode)\\
      %
      \ActionPsNudgeRight{} / \ActionPsNudgeLeft
      & Temporarily increase / decrease pitch by 2.0\% \\
      %
      \ActionPsReset
      & Reset pitch to 100\% \\
      %
      \ActionPsExit
      & Leave the Pitch Screen \\
      %
    \end{btnmap}
  \end{table}
}
\opt{RECORDER_PAD,ONDIO_PAD}{
  \warn{Changing the pitch can cause audible 'Artifacts' or 'Dropouts'.}
}
\opt{SWCODEC}{
  \subsubsection{Graphical EQ}
  This is a shortcut to the \setting{Equalizer}. See \reference{ref:EQ}.
  
  \subsubsection{Browse EQ Presets}
  Browse presets for the \setting{Equalizer}.
}

%********************QUICKSCREENS***********************************************
\opt{RECORDER_PAD}{
  \section{\label{ref:QuickScreenMenus}Quick Screen Menus}
  \screenshot{rockbox_interface/images/ss-quick-screen-112x64x1.png}{The quick screen}{}
  \screenshot{rockbox_interface/images/ss-quick-screen2-112x64x1.png}{The quick screen}{}
  Rockbox handles function buttons in a different way to the Archos software.
  \ButtonFOne\ is always bound to the menu function, while \ButtonFTwo\ and
  \ButtonFThree\ enable two quick menus.
  
  \ButtonFTwo\ displays some browse and play settings which are likely to be
  changed frequently. This settings are Shuffle mode, Repeat mode and the Show
  files options
  
  Shuffle mode plays each track in the currently playing list in a random order
  rather than in the order shown in the browser.

  Repeat mode repeats either a single track (One) or the entire playlist (All).

  Show files determines what type files can be seen in the browser.  This can be
  just MP3 files and directories (Music), Playlists, MP3 files and directories
  (Playlists), any files that Rockbox supports (Supported) or all files on the
  disk (All).

  See \reference{ref:PlaybackOptions} for more information about these
  settings.

  \begin{table}
    \begin{btnmap}{}{}
      \ButtonLeft & Controls Shuffle mode setting \\
      \ButtonRight & Controls Repeat mode setting \\
      \ButtonDown & Controls Show file setting \\
    \end{btnmap}
  \end{table}
  
  \ButtonFThree\ controls frequently used display options.
  
  Scroll bar turns the display of the Scroll bar on the left of the screen on
  or off.
  
  Status bar turns the status display at the top of the screen on or off. 
  Upside down inverts the screen so that the top of the display appears nearest
  to the buttons. This is sometimes useful when storing the \dap\ in a pocket.
  Key assignments swap over with the display orientation where it is logical 
  for them to do so.

  See \reference{ref:Displayoptions} for more information about these
  settings.
  
  \begin{table}
    \begin{btnmap}{}{}
      \ButtonLeft & Controls scroll bar display \\
      \ButtonRight & Controls status bar display \\
      \ButtonDown & Controls upside down screen setting \\
    \end{btnmap}
  \end{table}
}
