% $Id$ %
\chapter{Browsing and playing}
\section{\label{ref:file_browser}File Browser}
\screenshot{rockbox_interface/images/ss-file-browser}{The file browser}{}
Rockbox lets you browse your music in either of two ways. The 
\setting{File Browser} lets you navigate through the files and folders on 
your \dap, entering folders and executing the default action on each file.
To help differentiate files, each file format is displayed with an icon. 

The \setting{Database Browser}, on the other hand, allows you to navigate 
through the music on your player using categories like album, artist, genre,
etc.

You can select whether to browse using the \setting{File Browser} or the 
\setting{Database Browser} by adjusting the \setting{Show Files} setting.  
If you choose the \setting{File Browser}, the \setting{Show Files} setting also
lets you select what types of files you wish to view.  See 
\reference{ref:ShowFiles} for more information on the \setting{Show Files}
setting.

\note{The \setting{File Browser} allows you to manipulate your files in ways
that are not available within the \setting{Database Browser}. Read more about
\setting{Database} in \reference{ref:database}.  The remainder of this section
deals with the \setting{File Browser}.}

\opt{ondio}{
Unlike the Archos Firmware, Rockbox provides multivolume support for the
MultiMediaCard, this means the \dap{} can access both data volumes (internal
memory and the MMC), thus being able to for instance, build playlists with
files from both volumes.
In the \setting{File Browser} a new folder will appear as soon as the device
has read the content after inserting the card. This new folder's name is
generated as \fname{<MMC1>}, and will behave exactly as any other folder
on the \dap{}.
}

\subsection{\label{ref:controls}File Browser Controls}
\begin{table}
    \begin{btnmap}{}{}
      \ActionStdPrev{}/\ActionStdNext{}
         & Go to previous/next item in list. If you are on the first/last 
           entry, the cursor will wrap to the last/first entry.\\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,RECORDER_PAD}
        {
          \ButtonOn+\ButtonUp{}/ \ButtonDown
          & Move one page up/down in the list.\\
        }
      %
      \ActionTreeParentDirectory & Go to the parent directory.\\
      %
      \ActionTreeEnter
      & Executes an action. Depending on the file type, that action may vary.
        (See \reference{ref:Filemenu}) \\
      %
      \ActionTreeWps & If there is an audio file playing, returns to the
         \setting{While Playing Screen} (WPS) without stopping playback.\\
      %
      \nopt{player}%
        {%
          \ActionTreeStop & Stops audio playback.\\%
        }%
      %
      \ActionStdContext{}
      & Enter the \setting{File Menu}\\
      %
      \ActionStdMenu{}
      & Enter the \setting{Main Menu}\\
      %
      \opt{RECORDER_PAD}{
        \ButtonFTwo & Switches to the Browse/Play Quick Menu \\
        %
        \ButtonFThree & Switches to the Display Quick Menu \\ 
        %
      }
    \end{btnmap}
\end{table}

\opt{RECORDER_PAD}{
  The functions of the F keys are also summarised on the button bar at the
  bottom of the screen.
}

\subsection{\label{ref:Filemenu}\label{ref:PartIISectionFM}File Menu}
\screenshot{rockbox_interface/images/ss-file-menu}{The File Menu}{}

The \setting{File Menu} allows you to perform certain operations on files or 
folders.  To access the \setting{File Menu}, position the selector over a file 
or folder and access the context menu with \ActionStdContext{}.

\note{The \setting{File Menu} is a context sensitive menu.  If the 
\setting{File Menu} is invoked on a file, it will display options available 
for files.  If the \setting{File Menu} is invoked on a folder or directory, 
it will display options for directories.}

The \setting{File Menu} contains the following options (unless otherwise noted, 
each option pertains both to files and directories):

\begin{description}
\item [Playlist.]
  Enters the \setting{Playlist Submenu} (see below).
\item [Rename.]
  This function lets the user modify the name of a file or directory.
\item [Cut.]
  Copies the name of the currently selected file or directory to the clipboard
  and marks it to be `cut'.
\item [Copy.]
  Copies the name of the currently selected file or directory to the clipboard
  and marks it to be `copied'.
\item [Paste.]
  Only visible if a file or directory name is on the clipboard. When selected
  it will move or copy the clipboard to the current directory.
\item [Delete.]
  Deletes the currently selected file. This option applies only to files, and
  not to directories. Rockbox will ask for confirmation before deleting a file.
  Press \ActionYesNoAccept{}
  to confirm deletion or any other key to cancel.
\item [Delete Directory.]
  Deletes the currently selected directory and all of the files and folders
  contained in the selected directory.  Deleted directories cannot be recovered.
  Use this feature with caution!
\item [Open with.]
  Runs a viewer plugin on the file. Normally, when a file is selected in Rockbox,
  Rockbox automatically detects the file type and runs the appropriate plugin.
  The \setting{Open With} function can be used to override the default action and
  select a viewer by hand.
  For example, this function can be used to view a text file
  even if the file has a non-standard extension (i.e., the file has an extension
  of something other than \fname{.txt}). See \reference{ref:Viewersplugins}
  for more details on viewers.
\item [Create Directory.]
  Create a new folder in the current folder on the disk.
\item [Properties.]
  Shows properties such as size and the time and date of the last modification
  for the selected file. If used on a directory, the number of files and sub
  directories in that directory will be shown, as well as the total size.
\end{description}

\subsection{\label{ref:Playlistsubmenu}Playlist Submenu}
\screenshot{rockbox_interface/images/ss-playlist-menu}{The Playlist Submenu}{}
The \setting{Playlist Submenu} allows you to put tracks into a ``dynamic
playlist''. If there is no music currently playing, Rockbox will create a
new dynamic playlist and put the selected track(s) into the playlist.
If there is music currently playing, Rockbox will put the selected track(s)
into the current playlist. The place in which
the newly selected tracks are added to the playlist is determined by
the following options:

\begin{description}
\item [Insert.]
  Add track(s) to playlist. If no other tracks have been inserted then the
  selected track will be added immediately after current playing track,
  otherwise they will be added to end of insertion list.
\item [Insert next.]
  Add track(s) immediately after current playing track, no matter what else has
  been inserted.
\item [Insert last.]
  Add track(s) to end of playlist.
\item [Queue.]
  Queue is the same as Insert except queued tracks are deleted immediately from
  the playlist after they've been played. Also, queued tracks are not saved to
  the playlist file (see \reference{ref:playlistoptions}).
\item [Queue next.]
  Queue track(s) immediately after current playing track.
\item [Queue last.]
  Queue track(s) at end of playlist.
\end{description}

The \setting{Playlist Submenu} can be used to add either single tracks or
entire directories to a playlist. If the \setting{Playlist Submenu} is
invoked on a single track, it will put only that track into the playlist.
On the other hand, if the \setting{Playlist Submenu} is invoked on a
directory, Rockbox adds all of the tracks in that directory to the playlist.

\note{You can control whether or not Rockbox includes the contents of 
  sub-directories when adding an entire directory to a playlists. Set the 
  \setting{Main Menu $\rightarrow$ Playlist Options $\rightarrow$ Recursively
    Insert Directories} setting to \setting{Yes} if you would like Rockbox to 
  include tracks in sub-directories as well as tracks in the currently-selected 
  directory.}

If you want to have Rockbox create a playlist of a whole folder (to play an 
entire album, for example), use the \setting{File Browser} to select the song. 
When a single song is selected from the \setting{File Browser}, Rockbox will 
automatically create a playlist with all songs in the current folder. However, 
if you want to play only a single song and then stop, stop playback, navigate 
to the song you want to play, and use the 
\setting{Playlist $\rightarrow$ Insert} function to select the song.

Dynamic playlists are saved so resume will restore them exactly as they were 
before shutdown.

\note{To view, save or reshuffle the current dynamic playlist, use the 
\setting{Playlist Options} setting in the WPS Context Menu.}

\subsection{\label{sec:virtual_keyboard}Virtual Keyboard}
\screenshot{rockbox_interface/images/ss-virtual-keyboard}{The virtual keyboard}{}
This is the virtual keyboard that is used when entering text in Rockbox, for
  example when renaming a file or creating a new directory.

\opt{IRIVER_H100_PAD,IRIVER_H300_PAD,RECORDER_PAD}{
  \begin{table}
    \begin{btnmap}{}{}
      \ActionKbdLeft{}/ \ActionKbdRight{}/ \ActionKbdUp{}/ \ActionKbdDown
      & Move about the virtual keyboard (moves the solid cursor) \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,RECORDER_PAD}{
        \ActionKbdCursorLeft{} or \ActionKbdCursorRight
        & Move the line cursor within the text line \\
      }
      %
      \ActionKbdSelect
      & Inserts the selected keyboard letter at the current cursor position \\
      %
      \ActionKbdAbort
      & Exits the virtual keyboard without saving any changes \\
      %
      \opt{RECORDER_PAD}{
        \ButtonFOne
        & Shifts between the upper case, lower case and accented keyboards \\
      }
      %
      \ActionKbdDone
      & Exits the virtual keyboard and saves any changes \\
      \ActionKbdBackSpace
      & Deletes the character before the line cursor \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{
        \ActionKbdMorseInput
        & Enters Morse input mode \\
        \ActionKbdMorseSelect
        & Tap to select a character in Morse input mode \\
      }
    \end{btnmap}
  \end{table}
}

\opt{IPOD_4G_PAD,IPOD_3G_PAD,IRIVER_H10_PAD,IAUDIO_X5_PAD}{
  \textbf{Picker area}
  \begin{table}
    \begin{btnmap}{}{}
      \ActionKbdUp/\ActionKbdDown & Move about the virtual keyboard.
      If you move out of the picker area, you get to the \emph{Line edit mode}. \\
      \ActionKbdLeft/\ActionKbdRight & (moves the solid cursor). \\
      \ActionKbdSelect
      & Inserts the currently selected keyboard letter at the current
      filename cursor position \\
      \ActionKbdDone
      & Exits the virtual keyboard and saves any changes \\
      \ActionKbdAbort
      & Exits the virtual keyboard without saving any changes\\
      \opt{IPOD_4G_PAD,IPOD_3G_PAD,IRIVER_H10_PAD}{
          \ActionKbdMorseInput
          & Enters Morse input mode \\
          \ActionKbdMorseSelect
          & Tap to select a character in Morse input mode \\
      }
    \end{btnmap}
  \end{table}
  \textbf{Line edit mode}
  \begin{table}
    \begin{btnmap}{}{}
      \ActionKbdLeft/\ActionKbdRight & Move left and right\\
      \ActionKbdSelect & Deletes the letter to the left of the cursor\\
      \ActionKbdUp/\ActionKbdDown & Returns to the picker area\\
    \end{btnmap}
  \end{table}
}
\opt{ondio}{
    \begin{table}
    \begin{btnmap}{Picker area}{}
      \ButtonUp/\ButtonDown/\ButtonLeft/\ButtonRight
        & Move about the virtual keyboard (moves the solid cursor).
          If you move out of the picker area with \ButtonUp/\ButtonDown,
          you get to the line edit mode. \\
      \ButtonMenu 
        & Selects the letter underneath the cursor. \\
      Hold \ButtonMenu 
       & Accepts the change and returns to the File Browser.\\
      \ButtonOff 
       & Quit the virtual keyboard without saving the changes.\\
    \end{btnmap}
  \end{table}
  \begin{table}
    \begin{btnmap}{Line edit mode}{}
      \ButtonLeft/\ButtonRight & Move left and right\\
      \ButtonMenu & Deletes the letter to the left of the cursor\\
      Hold \ButtonMenu & Accepts the deletion\\
      \ButtonUp/\ButtonDown & Returns to the picker area\\
    \end{btnmap}
  \end{table}
}

\opt{player}{
  The current text line to be entered or edited is always listed on the first
  line of the display. The second line of the display can contain the character
  selection bar, as in the screenshot above.
  \begin{table}
     \begin{btnmap}{}{}
       \ButtonOn & Toggle picker- and line edit mode\\
       \ButtonLeft/\ButtonRight &  moves back and forth in the selected \\
                                & line (picker of input line) \\
       \ButtonPlay & Picks character in character bar, or acts as backspace \\
                   & in the text line.\\
       Hold \ButtonPlay & Accept\\
       \ButtonStop & Cancel\\
       \ButtonMenu & Flips picker lines\\
    \end{btnmap}
  \end{table}

}

\input{rockbox_interface/tagcache.tex}
\input{rockbox_interface/wps.tex}

%Include playlist section
\input{working_with_playlists/main.tex}
