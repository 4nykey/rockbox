% $Id$ %
\screenshot{configure_rockbox/images/ss-sound-settings}{The sound settings screen}{}

The Sound Settings menu offers a selection of sound properties you may 
change to customise your listening experience.

\section{Volume}
  This setting adjusts the volume of your music. Like most professional
  audio gear and many consumer audio products, Rockbox uses a decibel scale
  where 0 dB is a reference that indicates the maximum volume that the \dap{}
  can produce without possible distortion (clipping). All values lower than
  this reference will be negative and yield a progressively softer volume.
  \opt{player, recorder, recorderv2fm, ondio, ipodnano, ipodvideo, x5, h10,
       h10_5gb, sansa}{
  Values higher than 0 dB are available and can be used to raise the
  volume more than would otherwise be possible. These volume levels will
  ordinarily lead to distorted sound, but might work nicely for music that has
  an otherwise low volume level.}
  The volume can be adjusted from a
  \opt{player}{minimum of -78 dB to a maximum of +18 dB.}%
  \opt{recorder,recorderv2fm,ondio}{minimum of -100 dB to a maximum of +12 dB.}%
  \opt{h1xx,h300}{minimum of -84 dB to a maximum of 0 dB.}%
  \opt{ipodnano}{minimum of -72 dB to a maximum of +6 dB.}%
  \opt{ipodvideo}{minimum of -57 dB to a maximum of +6 dB.}%
  \opt{x5}{minimum of -73 dB to a maximum of +6 dB.}%
  \opt{ipodcolor}{minimum of -\fixme{??} dB to a maximum of +\fixme{??} dB.}%
  \opt{h10,h10_5gb,sansa}{minimum of -74 dB to a maximum of +6 db.}

\section{Bass}
  \opt{player,recorder,recorderv2fm,ondio}{This emphasises or suppresses the
  lower (bass) sounds in the track. 0 means that bass sounds are unaltered
  (flat response).}
  \opt{h1xx,h300}{The bass setting can be used to increase (but not decrease)
  frequencies below 300Hz. Bass boost can be set from 0 to 24 dB in
  increments of 2 dB. A setting of 0 means that low frequencies are unaltered
  (flat response).}
  \opt{ipodnano,ipodcolor}{This emphasises or suppresses the
  lower frequency (bass) sounds in the track. 0dB means that bass in unaltered
  (flat response). The minimum setting is -6dB and the maximum is 9dB.}
  \opt{ipodvideo}{This emphasises or suppresses the
  lower frequency (bass) sounds in the track. 0dB means that bass in unaltered
  (flat response). The minimum setting is -12dB and the maximum is 12dB.}
  \opt{x5}{This emphasises or suppresses the
  lower frequency (bass) sounds in the track. 0dB means that bass in unaltered
  (flat response). The minimum setting is -24dB and the maximum is 24dB.}
  \opt{sansa,h10,h10_5gb}{\fixme{add platform specific information here}}

\opt{ipodvideo}{
\section{Bass Cutoff}
  This setting controls the frequency below which the bass gain
  applies. The minimum setting is 1 and the maximum setting is 4 where a value
  of 1 indicates the lowest possible cutoff and a value of 4 indicates the highest
  possible cutoff. The actual cutoff frequency values will vary with sample rate.
}


\section{Treble}
  \opt{player,recorder,recorderv2fm,ondio}{This emphasises or suppresses the
  higher (treble) sounds in the track. 0 means that treble sounds are
  unaltered (flat response).}
  \opt{h1xx,h300}{The Treble setting can be used to increase (but not decrease)
  frequencies above 1.5kHz. Treble boost can be set from 0 to 6 dB in
  increments of 2 dB. A setting of 0 means that high frequencies are unaltered
  (flat response).}
  \opt{ipodnano,ipodcolor}{This setting emphasises or suppresses
  the higher frequency (treble) sounds in the track. 0dB means that treble is
  unaltered (flat response). The minimum setting -6dB and the maximum is 9dB.}
  \opt{ipodvideo}{This setting emphasises or suppresses
  the higher frequency (treble) sounds in the track. 0dB means that treble is
  unaltered (flat response). The minimum setting -12dB and the maximum is 12dB.}
  \opt{x5}{This setting emphasises or suppresses
  the higher frequency (treble) sounds in the track. 0dB means that treble is
  unaltered (flat response). The minimum setting -24dB and the maximum is 24dB.}
  \opt{sansa,h10,h10_5gb}{\fixme{add platform specific information here}}

\opt{ipodvideo}{
\section{Treble Cutoff}
  This setting controls the frequency above which the treble gain
  applies. The minimum setting is 1 and the maximum setting is 4 where a value
  of 1 indicates the lowest possible cutoff and a value of 4 indicates the highest
  possible cutoff. The actual cutoff frequency values will vary with sample rate.
}

\section{Balance}
  This setting controls the balance between the left and right channels. The
  default, 0, means that the left and right outputs are equal in volume.
  Negative numbers increase the volume of the left channel relative to the
  right, positive numbers increase the volume of the right channel relative
  to the left.

\section{Channels}
  A stereo audio signal consists of two channels, left and right. The
  \setting{Channels} setting controls if these channels are to be combined in
  any way, and if so, in what manner they will be combined.
  Available options are:
  %
  \begin{table}
  \begin{center}
  \begin{tabularx}{\textwidth}{lX}\toprule
      \textbf{Setting} & \textbf{Description} \\\midrule
        Stereo
        & Leave the audio signal unmodified. \\
        %
        Mono 
        & Combine both channels and send the resulting signal to both stereo
          channels, resulting in a monophonic output. \\
        %
        Custom
        & Allows you to manually specify a stereo width with the
          \setting{Stereo Width} setting described later in this chapter. \\
        %
        Mono Left
        & Plays the left channel in both stereo channels. \\
        %
        Mono Right
        & Plays the right channel in both stereo channels. \\
        %
        Karaoke
        & Removes all sound that is the same in both channels. Since most
          music is recorded with vocals being equally present in both channels
          to make the singer sound centrally placed, this often (but not 
          always) has the effect of removing the voice track from a song. This 
          setting also very often has other undesirable effects on the sound.  \\
        \bottomrule
  \end{tabularx}
  \end{center}
  \end{table}

\section{Stereo Width}
  Stereo width allows you to manually specify the effect that is applied
  when the \setting{Channels} setting is set to \setting{Custom}.
  All values below 100\% will progressively mix the contents of one channel
  into the other. This has the effect of gradually centering the stereo image,
  until you have monophonic sound at 0\%. Values above 100\% will progressively
  remove components in one channel that is also present in the other. This has
  the effect of widening the stereo field. A value of 100\% will leave the
  stereo field unaltered.

\opt{recorder,recorderv2fm}{
  \section{Loudness}
  Loudness is an effect which emphasises bass and treble. This makes the
  track seem louder by amplifying the frequencies that the human ear finds
  hard to hear. Frequencies in the vocal range are unaffected, since the human
  ear picks these up very easily.
}
  
\opt{recorder,recorderv2fm}{
\section{Auto Volume}
  Auto volume is a feature that automatically lowers the volume on loud parts,
  and then slowly restores the volume to the previous level over a time
  interval. That time interval is configurable here. Short values like 20ms
  are useful for ensuring a constant volume for in car use and other
  applications where background noise makes a constant loudness desirable.
  A longer timeout means that the change in volume back to the previous level
  will be smoother, so there will be less sharp changes in volume level.
}
  
\opt{recorder,recorderv2fm}{
\section{Super Bass}
  This setting changes the threshold at which bass frequencies are affected by
  the \setting{Loudness} setting, making the sound of drums and bass guitar
  louder in comparison to the rest of the track.  This setting only has an
  effect if \setting{Loudness} is set to a value larger than 0dB.
}

\opt{recorder,recorderv2fm}{
\section{MDB {}- Micronas Dynamic Bass}
  The rest of the parameters on this menu relate to the Micronas Dynamic
  Bass (MDB) function. This is designed to enable the user to hear bass
  notes that the headphones and/or speakers are not capable of reproducing.
  Every tone has a fundamental frequency (the ``main tone'') and also several
  harmonics, which are related to that tone. The human brain has a mechanism
  whereby it can actually infer the presence of bass notes from the higher
  harmonics that they would generate.

  The practical upshot of this is that MDB produces a more authentic sounding
  bass by tricking the brain in believing it's hearing tones that the 
  headphones or speakers aren't capable of reproducing. Try it and see
  what you think.

  The MDB parameters are as follows.
  %
  \begin{description}
  \item[MDB enable:]
    This turns the MDB feature on or off. For many users this will be the
    only setting they need, since Rockbox picks sensible defaults for the
    other parameters. MDB is turned off by default.
  \item[MDB strength:]
    How loud the harmonics generated by the MDB will be.
  \item[MDB Harmonics:]
    The percentage of the low notes that is converted into harmonics.
    If low notes are causing speaker distortion, this can be set to 100\%
    to eliminate the fundamental completely and only produce harmonics in the
    signal.  If set to 0\% this is the same as turning the MDB feature off.
  \item[MDB Centre Frequency:]
    The cutoff frequency of your headphones or speakers. This is usually
    given in the specification for the headphones/speakers.
  \item[MDB shape:]
    It is recommended that this parameter be set to 1.5 times the centre frequency.

    This is the frequency up to which harmonics are generated. Some of the
    lower fundamentals near the cut{}-off range will have their lower
    harmonics cut off, since they will be below the range of the speakers.
    Fundamentals between the cut{}-off frequency and the lower frequency
    will have their harmonics proportionally boosted to compensate and restore
    the `loudness' of these notes.

    For most users, the defaults should provide an improvement in sound
    quality and can be safely left as they are. For reference, the defaults
    Rockbox uses are:
    %
    \begin{table}[h!]
      \begin{center}
        \begin{tabular}{@{}lc@{}}\toprule
          Setting & Value \\\midrule
          MDB Strength & 50dB \\
          MDB Harmonics & 48\% \\
          MDB Centre Frequency & 60Hz \\
          MDB Shape & 90Hz \\\bottomrule
        \end{tabular}
      \end{center}
    \end{table}
      
  \end{description}
}

\opt{SWCODEC}{
\section{Crossfeed}
  Crossfeed attempts to make the experience of listening to music on
  headphones more similar to listening to music with stereo speakers. When you
  listen to music through speakers, each ear will hear sound originating from
  both speakers. However, the sound from the left speaker reaches your right
  ear slightly later than it does your left ear, and vice versa.

  The human ear and brain together are very good at interpreting the timing
  differences between direct sounds and reflected sounds and using that
  information to identify the direction that the sound is coming from. On the
  other hand, when listening to headphones, each ear hears only the stereo
  channel corresponding to it. The left ear hears only the left channel and
  the right ear hears only the right channel. The result is that sound from
  headphones does not provide the same spatial cues to your ear and brain as
  speakers, and might for that reason sound unnatural to some listeners.
    
  The crossfeed function uses an algorithm to feed a delayed and filtered
  portion of the signal from the right channel into the left channel and vice
  versa in order to simulate the spatial cues that the ear and brain receive
  when listening to a set of loudspeakers placed in front of the listener. The
  result is a more natural stereo image that can be especially appreciated in
  older rock and jazz records, where one instrument is often hard-panned to
  just one of the speakers. Many people will find such records tiring to listen
  to using earphones and no crossfeed effect.

  Crossfeed has the following settings.
  \begin{description}
  \item[Crossfeed:]
    Selects whether the crossfeed effect is to be enabled or not.
  \item[Direct Gain:]
    How much the level of the audio that travels the direct path from a speaker
    to the corresponding ear is supposed to be decreased.
  \item[Cross Gain:]
    How much the level of the audio that travels the cross path from a speaker
    to the opposite ear is to be decreased.
  \item[High-Frequency Attenuation:]
    How much the upper frequencies of the cross path audio will be dampened.
    Note that the total level of the higher frequencies will be a combination
    of both this setting and the \setting{Cross Gain} setting.
  \item[High-Frequency Cutoff]
    Decides at which frequency the cross path audio will start to be cut
    by the amount described by the \setting{High-Frequency Attenuation} 
    setting.
  \end{description}

  Most users will find the default settings to yield satisfactory results, but
  for the more adventurous user the settings can be fine-tuned to provide a
  virtual speaker placement suited to ones preference.
  % TODO: adapt the guidelines for crossfeed settings found here?
  % http://www.ohl.to/interests-in-audio/crossfeed-and-eq-for-headphones/ 

  Beware that the crossfeed function is capable of making the audio distort
  if you choose settings which result in a too high output level.
}
  
\opt{SWCODEC}{
\section{\label{ref:EQ}Equalizer}
  \screenshot{configure_rockbox/images/ss-equalizer}{The graphical equalizer}{}
  Rockbox features a parametric equalizer. As the name suggests, a parametric
  equalizer lets you control several different parameters for each band of the
  equalizer. Rockbox's parametric EQ is composed of five different EQ bands:

  \begin{table}
  \begin{center}
  \begin{tabularx}{\textwidth}{lX}\toprule
      \textbf{EQ Band(s)} & \textbf{Description} \\\midrule
        Band 0: Low shelf filter
        & A low shelf filter boosts or lowers all frequencies below the
        designated cutoff point. The ``bass''control on most home or car
        stereos is an example of a low shelf filter. The low shelf
        filter in Rockbox is more flexible than a simple ``bass''
        control, because a simple bass control only lets you adjust
        the amount of gain that is applied. Rockbox lets you control
        the amount of gain that is applied (i.e., the amount that the
        bass is boosted or cut) too, but Rockbox also allows you to
        adjust the ``cutoff'' frequency where the shelving starts to take
        effect. For example, a cutoff frequency of 50 Hz will adjust only very
        low frequencies. A cutoff frequency of 200 Hz, on the other hand, will
        adjust a much wider range of bass frequencies.\\
        %
        Bands 1-3: Peaking filters
        & Peaking EQ filters boost or low a center frequency that you select,
        as well as the frequencies within a certain distance of that
        center. Graphic equalizers in home stereos are usually peaking
        filters. The peaking EQs on Rockbox's parametric equalizer let
        you adjust three different parameters for each EQ band 1
        through 3. The ``center'' parameter controls the center
        frequency that is adjusted by that EQ band. The ``gain''
        parameter controls how much each band is adjusted. Positive
        numbers make the EQ band louder, while negative numbers make
        that EQ band quieter. Finally, the ``Q'' parameter controls how wide
        or narrow each EQ band is. Higher Q values will affect a
        narrow band of frequencies, while lower Q values will affect
        a wider band of frequencies.\\
        %
        Band 4: Hi shelf filter
        & A high shelf filter boosts or lowers all frequencies above a
        designated cutoff point. The ``treble'' control on most home or car
        stereos is an example of a high shelf filter. The high shelf filter is
        adjusted the same way as the low shelf filter, except that it works on
        the high end of the frequency spectrum rather than the low end.\\
        \bottomrule
  \end{tabularx}
  \end{center}
  \end{table}

  So, as a general guide, EQ band 0 should be used for lows, EQ bands 1
  through 3 should be used for mids, and EQ band 4 should be used for highs.

\begin {description}
  \item[Enable EQ:]
  This option controls whether the EQ is on or off.

  \item[Graphical EQ:]
  This option brings up a graphic EQ screen, which allows adjustment of each of
  the three parameters described above (gain, center frequency, and Q) for each
  of the five EQ bands.
  
  \begin{table}
    \begin{btnmap}{}{}
      \opt{IPOD_4G_PAD,IPOD_3G_PAD,IPOD_VIDEO_PAD}{\ButtonScrollFwd}
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}{\ButtonUp} 
      \opt{SANSA_E200_PAD}{\ButtonScrollUp}
      & Raises the highlighted parameter.\\
      %
      \opt{IPOD_4G_PAD,IPOD_3G_PAD,IPOD_VIDEO_PAD}{\ButtonScrollBack}
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}{\ButtonDown} 
      \opt{SANSA_E200_PAD}{\ButtonScrollDown}
      & Lowers the highlighted parameter.\\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}{\ButtonLeft}
      \opt{IPOD_4G_PAD,IPOD_3G_PAD,IPOD_VIDEO_PAD}{\ButtonLeft} 
      \opt{SANSA_E200_PAD}{\ButtonUp}
      & Moves to the previous EQ band. \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD,IAUDIO_X5_PAD}{\ButtonRight}
      \opt{IPOD_4G_PAD,IPOD_3G_PAD,IPOD_VIDEO_PAD}{\ButtonRight} 
      \opt{SANSA_E200_PAD}{\ButtonDown}
      & Moves to the next EQ band. \\
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonSelect}
      \opt{IAUDIO_X5_PAD,IPOD_4G_PAD,IPOD_3G_PAD,IPOD_VIDEO_PAD,SANSA_E200_PAD}{\ButtonSelect} 
      & Toggles the cursor among the three parameters (gain, center frequency, 
      Q) for the selected EQ band.\\  
      %
      \opt{IRIVER_H100_PAD,IRIVER_H300_PAD}{\ButtonMode}
      \opt{IPOD_4G_PAD,IPOD_3G_PAD,IPOD_VIDEO_PAD}{\ButtonMenu} 
      \opt{IAUDIO_X5_PAD}{\ButtonPower/\ButtonRec}
      \opt{SANSA_E200_PAD}{\ButtonPower/\ButtonRight}
      & Exits the graphic EQ screen.\\  
    \end{btnmap}
  \end{table}

  \item[Pre-cut:]
  If too much gain is added through the graphical EQ, your music may distort.
  The \setting{Precut} setting allows you to adjust the overall gain of the EQ.

  If your music distorts when using the EQ, trying changing this setting to a 
  negative value.

\item[Simple EQ:]
This option provides an easier alternative for those who are daunted by all of
the parameters that can be adjusted using the graphical EQ. With the
\setting{Simple EQ}, the only parameter that can be adjusted is the gain.

\item[Advanced EQ:]
This sub menu provides options for adjusting the same parameters as the
\setting{Graphical EQ}. The only difference is that the parameters are
adjusted through textual menus rather than through a graphic interface.

\item[Save EQ Preset:]
This option saves the current EQ configuration in a \fname{.cfg} file.

\item[Browse EQ Presets:]
This menu displays a list EQ presets, as well as any EQ configurations saved
using the \setting{Save EQ Preset} option. Users unfamiliar with the
operation of a parametric EQ may wish to use the presets instead of trying to
configure the EQ, or use the presets for designing their own custom EQ
settings.

\end{description}
}

\opt{SWCODEC}{
\section{Dithering}
This setting controls the dithering and noise shaping functionality of Rockbox.

Most of Rockbox' audio file decoders work at a higher bit depth than the 16 bits
used for output on the \daps{} audio connectors. The simplest way in which to
convert from one bit depth to another is simply discarding all the surplus bits.
This is the default behaviour, and adds distortion to the signal that will
vary in character along with the desired sound.

Dithering adds low-level noise to the signal prior to throwing away the surplus
bits, which gives the resulting signal a uniform noise floor which is
independent of the signal. Most people find this noise preferable to the
time-varying noise heard when not performing dithering.

After dithering, noise shaping is performed. This basically just pushes the
dithering noise to the parts of the frequency spectrum humans cannot hear so
easily. In Rockbox' case, some of the noise is pushed up to above 10 kHz.

This setting will be put to its best use when listening to dynamic music with
frequently occuring quiet parts, classical music being a typical example. It is
worth noting that the effects of dithering and noise shaping are very subtle,
and not easily noticable.

Rockbox uses highpass triangular distribution noise as the dithering noise
source, and a third order noise shaper.
}
